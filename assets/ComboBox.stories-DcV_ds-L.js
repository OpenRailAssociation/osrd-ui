import{r as n,R as o}from"./index-RYns6xqu.js";/* empty css              */import{X as K,i as X}from"./index.esm-CkK1enDk.js";import{c as Y}from"./index-Cm1LdsEh.js";import{I as _}from"./Input-C-18yi6J.js";import"./FieldWrapper-9p7Bgq-6.js";import"./InputStatusIcon-VZR2PQlg.js";import"./useFocusByTab-CGFT2N9H.js";const f=s=>s.normalize("NFD").replace(/[\u0300-\u036f]/g,""),$=({suggestions:s,onChange:c,getSuggestionLabel:a,customLabel:N,numberOfSuggestionsToShow:z=5,exactSearch:k=!1,value:p="",small:x,onSelectSuggestion:r,disableDefaultFilter:T=!1,...D})=>{const[y,u]=n.useState([]),[E,h]=n.useState(-1),[V,i]=n.useState(p),[w,v]=n.useState(null),[R,C]=n.useState(!1),b=n.useRef(null),m=n.useMemo(()=>T?s:[...s].sort((e,t)=>a(e).localeCompare(a(t))),[s,a,T]),W=R&&y.length>0&&!D.disabled,M=()=>{var e;return(e=b.current)==null?void 0:e.focus()},q=()=>{i(""),b.current&&(b.current.value=""),v(null),r==null||r(void 0);const e={target:{value:""},currentTarget:{value:""}};c==null||c(e),M()},O=[...w||s.some(e=>a(e)===p)?[{icon:o.createElement(K,{size:x?"sm":"lg"}),action:q,className:"clear-icon"}]:[],...m.length>0?[{icon:o.createElement(X,{size:x?"sm":"lg"}),action:M,className:Y("chevron-icon",{disabled:D.disabled})}]:[]];n.useEffect(()=>{p?i(p):(i(""),v(null),r==null||r(void 0))},[p]),n.useEffect(()=>{u(m)},[m]);const B=e=>{const t=f(e.currentTarget.value).trim();if(i(e.currentTarget.value),c==null||c(e),t.trim()===""){u([]),v(null);return}const l=m.filter(d=>{const I=f(a(d).toLowerCase());return k?I.startsWith(t.toLowerCase()):I.includes(t.toLowerCase())});u(l)},F=e=>{const t=y[e],l=a(t);i(l),v(t),r==null||r(t),u([]),h(-1),setTimeout(()=>{var d;(d=b.current)==null||d.blur()},0)},L=e=>{e.key==="ArrowDown"?h(t=>t<y.length-1?t+1:t):e.key==="ArrowUp"?h(t=>t>0?t-1:t):(e.key==="Enter"||e.key==="Tab")&&E>=0?F(E):e.key==="Escape"&&u([])},g=e=>{e.stopPropagation(),C(!0);const t=f(e.currentTarget.value.trim().toLowerCase());if(t){const l=m.filter(d=>{const I=f(a(d).toLowerCase());return k?I.startsWith(t):I.includes(t)});u(l)}else u(m)},A=()=>{C(!1);const e=f(V.trim().toLowerCase()),t=s.some(l=>f(a(l).toLowerCase())===e);y.length===1?F(0):!t&&w?i(a(w)):t||(i(""),v(null)),u([])},H=e=>{F(e)};return o.createElement("div",{className:"combo-box",style:{"--number-of-suggestions":z},onBlur:A},N&&o.createElement("label",{htmlFor:D.id},N),o.createElement(_,{...D,ref:b,value:V,onChange:B,onKeyDown:L,onFocus:g,withIcons:O,small:x}),W&&o.createElement("ul",{className:"suggestions-list"},y.map((e,t)=>o.createElement("li",{key:`${a(e)}-${t}`,className:Y("suggestion-item",{active:t===E,small:x}),onClick:()=>H(t),onMouseDown:l=>l.preventDefault()},a(e)))))},J=[{id:"1",label:"Manuel"},{id:"2",label:"Consuela"},{id:"3",label:"Juan"},{id:"4",label:"Manolo"}],te={component:$,args:{small:!1,disabled:!1,readOnly:!1,onChange:()=>{},onSelectSuggestion:()=>{},getSuggestionLabel:s=>s.label,suggestions:J},decorators:[s=>o.createElement("div",{style:{maxWidth:"20rem"}},o.createElement(s,null))],title:"core/ComboBox",tags:["autodocs"]},se={args:{label:"Your name",type:"text",defaultValue:""}},ae={args:{label:"Your name",type:"text",suggestions:[{id:"1",label:"Very very very very very very long value 1"},{id:"2",label:"Very very very very very very long value 2"}],value:"Very very very very very very long value 1"}},re={args:{label:"Your name",type:"text",value:"Manolo"}},le={args:{label:"Your name",type:"text",disabled:!0}},ne={args:{label:"Your name",type:"text",hint:"You can type Manu to have suggestions"}},oe={args:{label:"Your name",type:"text",required:!0}},ue={args:{label:"Name",type:"text",required:!0,statusWithMessage:{status:"loading"}}},ie={args:{label:"Name",type:"text",required:!0,small:!0}},ce={args:{label:"Name",type:"text",disableDefaultFilter:!0}},me=["Default","LongText","WithDefaultValue","Disabled","Hint","RequiredInput","LoadingInput","SmallInput","DisabledDefaultFilter"];export{se as Default,le as Disabled,ce as DisabledDefaultFilter,ne as Hint,ue as LoadingInput,ae as LongText,oe as RequiredInput,ie as SmallInput,re as WithDefaultValue,me as __namedExportsOrder,te as default};
