import{r as D,R as c}from"./index-RYns6xqu.js";import{c as b}from"./index-Cm1LdsEh.js";import{l as p}from"./lodash-CcdATr5u.js";import{X as A,Y as _,z as C}from"./utils-BdV3spGV.js";import{P as E,S as Z,O,f as I,a as Y}from"./paths-BB683TMT.js";import"./index-CHvE9HB5.js";import{g as y}from"./vectors-BMNFZSin.js";/* empty css              */function d(l,n,s,e){const t=(u,g)=>u.x*g.y-u.y*g.x,a=y(n,l),o=y(e,s),i=t(a,o);if(i===0)return!1;const r=y(s,l),f=t(r,o)/i,m=t(r,a)/i;return p.inRange(f,0,1)&&p.inRange(m,0,1)}function k(l,n,s,e){const t=({x:f,y:m})=>p.inRange(f,0,l)&&p.inRange(m,0,n);if(t(s)||t(e))return!0;const a={x:0,y:0},o={x:l,y:0},i={x:0,y:n},r={x:l,y:n};return d(s,e,a,o)||d(s,e,a,i)||d(s,e,i,r)||d(s,e,o,r)}function N(l,n,s){if(!s.length)return!1;if(s.length===1){const{x:t,y:a}=s[0];return p.inRange(t,0,l)&&p.inRange(a,0,n)}return s.slice(0,-1).map((t,a)=>[t,s[a+1]]).some(([t,a])=>k(l,n,t,a))}const w=p.keyBy(E,"id"),z=({spaceScaleType:l})=>{const[n,s]=D.useState({xOffset:0,yOffset:0,xZoomLevel:A*3,yZoomLevel:_,selected:null,panTarget:null,hoveredPath:null});return c.createElement("div",{className:"inset-0"},c.createElement(Z,{className:b("inset-0 absolute p-0 m-0",n.panTarget&&"cursor-grabbing",n.hoveredPath&&"cursor-pointer"),operationalPoints:O,spaceOrigin:0,spaceScales:O.slice(0,-1).map((e,t)=>({from:e.position,to:O[t+1].position,...l==="linear"?{size:50*n.yZoomLevel}:{coefficient:150/n.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/n.xZoomLevel,xOffset:n.xOffset,yOffset:n.yOffset,onClick:()=>{const{hoveredPath:e,selected:t,panTarget:a}=n;a||s(o=>({...o,selected:!e||e.element.pathId===t?null:e.element.pathId}))},onHoveredChildUpdate:({item:e})=>{s(t=>({...t,hoveredPath:e}))},onPan:({initialPosition:e,position:t,isPanning:a})=>{const{panTarget:o}=n,i=y(e,t);if(!a)s(r=>({...r,panTarget:null}));else if(!o)s(r=>({...r,panTarget:{type:"stage",initialOffset:{x:r.xOffset,y:r.yOffset}}}));else if(o.type==="stage"){const r=o.initialOffset.x+i.x,f=o.initialOffset.y+i.y;s(m=>({...m,xOffset:r,yOffset:f}))}},onZoom:e=>{e.event.ctrlKey?(s(t=>({...t,...C(t,e)})),e.event.stopPropagation(),e.event.preventDefault()):s(t=>{const a={...t,xOffset:t.xOffset+e.delta*-50};if(t.selected){const{width:o,height:i,getPoint:r,getTime:f,getSpacePixel:m}=e.context,u=w[t.selected],g=u.points.map(r);if(N(o,i,g)){const T=f(o/2),P=I(u,T),L=m(P),R=1/4;a.yOffset-=(L-i/2)*R}}return a})}},E.map(e=>{var t,a;return c.createElement(Y,{key:e.id,path:e,color:e.color,level:((t=n.panTarget)==null?void 0:t.type)==="items"?n.selected===e.id?1:4:n.selected===e.id||((a=n.hoveredPath)==null?void 0:a.element.pathId)===e.id?1:n.selected?3:2})}),c.createElement("div",{style:{position:"absolute",left:10,bottom:40,fontFamily:"sans-serif",userSelect:"none",background:"#ffffffcc"}},c.createElement("div",null,"You can ",c.createElement("strong",null,"pan")," the chart with the mouse."),c.createElement("div",null,"You can ",c.createElement("strong",null,"select")," a path by clicking it."),c.createElement("div",null,"You can ",c.createElement("strong",null,"zoom")," the chart on the mouse using"," ",c.createElement("strong",null,"the wheel + the Ctrl key"),"."),c.createElement("div",null,"You can ",c.createElement("strong",null,"move")," along the time axis with ",c.createElement("strong",null,"the wheel"),". If a path is selected, it should remain on screen as much as possible."))))},j={title:"SpaceTimeChart/Keep a path focused",component:z,argTypes:{spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}}}},h={name:"Default arguments",args:{spaceScaleType:"linear"}};var x,v,S;h.parameters={...h.parameters,docs:{...(x=h.parameters)==null?void 0:x.docs,source:{originalSource:`{
  name: 'Default arguments',
  args: {
    spaceScaleType: 'linear'
  }
}`,...(S=(v=h.parameters)==null?void 0:v.docs)==null?void 0:S.source}}};const q=["DefaultArgs"];export{h as DefaultArgs,q as __namedExportsOrder,j as default};
