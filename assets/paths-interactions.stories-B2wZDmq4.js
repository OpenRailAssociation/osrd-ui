import{r as T,R as P}from"./index-RYns6xqu.js";import{c as Z}from"./index-Cm1LdsEh.js";import{l as _}from"./lodash-CcdATr5u.js";import{X as k,Y as w,z as A}from"./utils-BdV3spGV.js";import{P as M,S as V,O as x,a as z}from"./paths-BB683TMT.js";import"./index-CHvE9HB5.js";import{g as C}from"./vectors-BMNFZSin.js";/* empty css              */function N(m,h){const d=h-m.points[0].time;return{...m,points:m.points.map(u=>({...u,time:u.time+d}))}}const R=({enableDragPaths:m,pickingTolerance:h,enableMultiSelection:d,spaceScaleType:u})=>{const[O,D]=T.useState(M),L=T.useMemo(()=>_.keyBy(O,"id"),[O]),[e,i]=T.useState({xOffset:0,yOffset:0,xZoomLevel:k,yZoomLevel:w,selection:null,panTarget:null,hoveredPath:null});return P.createElement("div",{className:"inset-0"},P.createElement(V,{className:Z("inset-0 absolute p-0 m-0",e.panTarget&&"cursor-grabbing",e.hoveredPath&&"cursor-pointer"),operationalPoints:x,spaceOrigin:0,spaceScales:x.slice(0,-1).map((a,t)=>({from:a.position,to:x[t+1].position,...u==="linear"?{size:50*e.yZoomLevel}:{coefficient:150/e.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/e.xZoomLevel,xOffset:e.xOffset,yOffset:e.yOffset,onClick:({event:a})=>{const{hoveredPath:t,selection:l,panTarget:c}=e;if(!c)if(!t)(!d||!a.ctrlKey)&&i(n=>({...n,selection:null}));else if(!l)i({...e,selection:new Set([t.element.pathId])});else if(!d||!a.ctrlKey)i({...e,selection:l.has(t.element.pathId)?null:new Set([t.element.pathId])});else{const n=new Set(l);n.has(t.element.pathId)?n.delete(t.element.pathId):n.add(t.element.pathId),i({...e,selection:n.size?n:null})}},onHoveredChildUpdate:({item:a})=>{i(t=>({...t,hoveredPath:a}))},onPan:({initialPosition:a,position:t,initialData:l,data:c,isPanning:n})=>{const{panTarget:o,hoveredPath:S,selection:g}=e,v=C(a,t);if(!n)i(s=>({...s,panTarget:null}));else if(!o&&m&&S){const s=g!=null&&g.has(S.element.pathId)?g:new Set([S.element.pathId]);i(p=>({...p,selection:s,panTarget:{type:"items",initialTimeOrigins:Array.from(s).reduce((f,r)=>({...f,[r]:L[r].points[0].time}),{})}}))}else if(!o)i(s=>({...s,panTarget:{type:"stage",initialOffset:{x:e.xOffset,y:e.yOffset}}}));else if(o.type==="stage"){const s=o.initialOffset.x+v.x,p=o.initialOffset.y+v.y;i(f=>({...f,xOffset:s,yOffset:p}))}else if(o.type==="items"){const{initialTimeOrigins:s}=o,p=c.time-l.time;D(f=>f.map(r=>s[r.id]?N(r,s[r.id]+p):r))}},onZoom:a=>{i(t=>({...t,...A(e,a)}))}},O.map(a=>{var t,l,c,n,o;return P.createElement(z,{key:a.id,path:a,color:a.color,pickingTolerance:h,level:((t=e.panTarget)==null?void 0:t.type)==="items"?(l=e.selection)!=null&&l.has(a.id)?1:4:(c=e.selection)!=null&&c.has(a.id)||((n=e.hoveredPath)==null?void 0:n.element.pathId)===a.id?1:(o=e.selection)!=null&&o.size?3:2})})))},q={title:"SpaceTimeChart/Paths interactions",component:R,argTypes:{enableDragPaths:{name:"Enable dragging paths?",defaultValue:!0,control:{type:"boolean"}},enableMultiSelection:{name:"Multi-selection?",defaultValue:!0,control:{type:"boolean"}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}},pickingTolerance:{name:"Picking tolerance",description:"(in pixels)",defaultValue:5,control:{type:"number",step:1,min:0,max:30}}}},y={name:"Default arguments",args:{enableDragPaths:!0,enableMultiSelection:!0,spaceScaleType:"linear",pickingTolerance:5}};var b,E,I;y.parameters={...y.parameters,docs:{...(b=y.parameters)==null?void 0:b.docs,source:{originalSource:`{
  name: 'Default arguments',
  args: {
    enableDragPaths: true,
    enableMultiSelection: true,
    spaceScaleType: 'linear',
    pickingTolerance: 5
  }
}`,...(I=(E=y.parameters)==null?void 0:E.docs)==null?void 0:I.source}}};const F=["DefaultArgs"];export{y as DefaultArgs,F as __namedExportsOrder,q as default};
