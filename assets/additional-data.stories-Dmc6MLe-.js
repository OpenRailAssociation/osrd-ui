import{r as _,R as T}from"./index-RYns6xqu.js";import{c as I}from"./index-Cm1LdsEh.js";import{l as O}from"./lodash-CcdATr5u.js";import{X as b,Y as h,M as k,a as z,b as C,c as A}from"./utils-2YTZCScs.js";import{S as N,O as Z,P as w,a as x,K as y,b as g,M as D,H as X,A as V,u as R,E as Y,c as H}from"./paths-OTZaEske.js";import{M as K}from"./components-BtnTWRcn.js";import{g as B}from"./vectors-BiytCEVh.js";/* empty css              */import"./index-CHvE9HB5.js";const F=[{from:6*y,to:24*y},{from:60*y,to:70*y}],U=[{areaFrom:3.2*y,areaTo:7*y,doorPosition:4*y,timeStart:+g+30*D,timeEnd:+g+2*X+30*D}],W=({from:M,to:S})=>{const l=_.useCallback((r,{getSpacePixel:o,width:n,height:i,spaceAxis:e})=>{const a=e==="x"?n:i,f=e==="x"?i:n,c=O.clamp(o(M),0,a),s=O.clamp(o(S),0,a)-c;s&&(r.fillStyle=V,e==="x"?r.fillRect(c,0,s,f):r.fillRect(0,c,f,s))},[M,S]);return R("background",l),null},j=({doorPosition:M,areaFrom:S,areaTo:l,timeStart:r,timeEnd:o})=>{const n=_.useCallback((e,{getSpacePixel:a,getTimePixel:f,width:c,height:P,spaceAxis:s})=>{const d=s==="x"?c:P,L=s==="x"?P:c,t=O.clamp(a(S),0,d),p=O.clamp(a(l),0,d),m=O.clamp(f(r),0,L),E=O.clamp(f(o),0,L),u=p-t,v=E-m;!u||!v||(e.fillStyle="#FF000029",s==="x"?e.fillRect(t,m,u,v):e.fillRect(m,t,v,u))},[S,l,o,r]);R("background",n);const i=_.useCallback((e,{getSpacePixel:a,getTimePixel:f,width:c,height:P,spaceAxis:s})=>{const d=s==="x"?c:P,L=s==="x"?P:c,t=a(M),p=f(r),m=f(o),E=O.clamp(m,0,L)-O.clamp(p,0,L);if(!O.inRange(t,0,d)||!E)return;e.strokeStyle=Y,e.lineWidth=2,e.setLineDash([4,4]),e.beginPath(),s==="x"?(e.moveTo(t,p),e.lineTo(t,m)):(e.moveTo(p,t),e.lineTo(m,t)),e.stroke(),e.setLineDash([]);const u=4;e.fillStyle=H,e.beginPath(),s==="x"?(e.moveTo(t,p),e.arc(t,p,u,Math.PI,Math.PI*2,!0)):(e.moveTo(p,t),e.arc(p,t,u,Math.PI/2,Math.PI*3/2,!0)),e.closePath(),e.fill(),e.beginPath(),s==="x"?(e.moveTo(t,m),e.arc(t,m,u,Math.PI,Math.PI*2,!1)):(e.moveTo(m,t),e.arc(m,t,u,Math.PI/2,Math.PI*3/2,!1)),e.closePath(),e.fill()},[M,o,r]);return R("paths",i),null},q=({swapAxis:M,spaceScaleType:S})=>{const[l,r]=_.useState({xOffset:0,yOffset:0,xZoomLevel:b,yZoomLevel:h,panning:null});return T.createElement("div",{className:"inset-0"},T.createElement(N,{className:I("inset-0 absolute p-0 m-0",l.panning&&"cursor-grabbing"),operationalPoints:Z,swapAxis:M,spaceOrigin:0,spaceScales:Z.slice(0,-1).map((o,n)=>({from:o.position,to:Z[n+1].position,...S==="linear"?{size:50*l.yZoomLevel}:{coefficient:150/l.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/l.xZoomLevel,xOffset:l.xOffset,yOffset:l.yOffset,onPan:({initialPosition:o,position:n,isPanning:i})=>{const e=B(o,n);r(a=>{if(i)if(a.panning){const{initialOffset:f}=a.panning;return{...a,xOffset:f.x+e.x,yOffset:f.y+e.y}}else return{...a,panning:{initialOffset:{x:a.xOffset,y:a.yOffset}}};else return{...a,panning:null}})},onZoom:({delta:o,position:{x:n,y:i}})=>{r(e=>{const a={...e};return a.xZoomLevel=Math.min(Math.max(a.xZoomLevel*(1+o/10),k),z),a.yZoomLevel=Math.min(Math.max(a.yZoomLevel*(1+o/10),C),A),a.xOffset=n-(n-e.xOffset)/e.xZoomLevel*a.xZoomLevel,a.yOffset=i-(i-e.yOffset)/e.yZoomLevel*a.yZoomLevel,a})}},w.map(o=>T.createElement(x,{key:o.id,path:o,color:o.color})),F.map(({from:o,to:n},i)=>T.createElement(W,{key:i,from:o,to:n})),U.map((o,n)=>T.createElement(j,{key:n,...o})),T.createElement(K,null)))},se={title:"SpaceTimeChart/Additional data",component:q,argTypes:{swapAxis:{name:"Swap time and space axis?",defaultValue:!1,control:{type:"boolean"}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}}}},le={name:"Default arguments",args:{swapAxis:!1,spaceScaleType:"linear"}},re=["DefaultArgs"];export{le as DefaultArgs,re as __namedExportsOrder,se as default};
