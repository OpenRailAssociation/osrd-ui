import{r as g,R as T}from"./index-RYns6xqu.js";import{c as z}from"./index-Cm1LdsEh.js";import{l as u}from"./lodash-CcdATr5u.js";import{X as A,Y as C,M as N,a as w,b as x,c as X}from"./utils-BdV3spGV.js";import{S as V,O as Z,P as Y,a as H,K as y,b as D,M as I,H as K,A as B,u as R,E as F,c as U}from"./paths-BB683TMT.js";import{M as W}from"./components-BNWsAftZ.js";import{g as j}from"./vectors-BMNFZSin.js";/* empty css              */import"./index-CHvE9HB5.js";const q=[{from:6*y,to:24*y},{from:60*y,to:70*y}],G=[{areaFrom:3.2*y,areaTo:7*y,doorPosition:4*y,timeStart:+D+30*I,timeEnd:+D+2*K+30*I}],J=({from:S,to:M})=>{const l=g.useCallback((r,{getSpacePixel:o,width:s,height:i,spaceAxis:e})=>{const a=e==="x"?s:i,m=e==="x"?i:s,c=u.clamp(o(S),0,a),t=u.clamp(o(M),0,a)-c;t&&(r.fillStyle=B,e==="x"?r.fillRect(c,0,t,m):r.fillRect(0,c,m,t))},[S,M]);return R("background",l),null},Q=({doorPosition:S,areaFrom:M,areaTo:l,timeStart:r,timeEnd:o})=>{const s=g.useCallback((e,{getSpacePixel:a,getTimePixel:m,width:c,height:P,spaceAxis:t})=>{const L=t==="x"?c:P,d=t==="x"?P:c,n=u.clamp(a(M),0,L),p=u.clamp(a(l),0,L),f=u.clamp(m(r),0,d),E=u.clamp(m(o),0,d),O=p-n,v=E-f;!O||!v||(e.fillStyle="#FF000029",t==="x"?e.fillRect(n,f,O,v):e.fillRect(f,n,v,O))},[M,l,o,r]);R("background",s);const i=g.useCallback((e,{getSpacePixel:a,getTimePixel:m,width:c,height:P,spaceAxis:t})=>{const L=t==="x"?c:P,d=t==="x"?P:c,n=a(S),p=m(r),f=m(o),E=u.clamp(f,0,d)-u.clamp(p,0,d);if(!u.inRange(n,0,L)||!E)return;e.strokeStyle=F,e.lineWidth=2,e.setLineDash([4,4]),e.beginPath(),t==="x"?(e.moveTo(n,p),e.lineTo(n,f)):(e.moveTo(p,n),e.lineTo(f,n)),e.stroke(),e.setLineDash([]);const O=4;e.fillStyle=U,e.beginPath(),t==="x"?(e.moveTo(n,p),e.arc(n,p,O,Math.PI,Math.PI*2,!0)):(e.moveTo(p,n),e.arc(p,n,O,Math.PI/2,Math.PI*3/2,!0)),e.closePath(),e.fill(),e.beginPath(),t==="x"?(e.moveTo(n,f),e.arc(n,f,O,Math.PI,Math.PI*2,!1)):(e.moveTo(f,n),e.arc(f,n,O,Math.PI/2,Math.PI*3/2,!1)),e.closePath(),e.fill()},[S,o,r]);return R("paths",i),null},$=({swapAxis:S,spaceScaleType:M})=>{const[l,r]=g.useState({xOffset:0,yOffset:0,xZoomLevel:A,yZoomLevel:C,panning:null});return T.createElement("div",{className:"inset-0"},T.createElement(V,{className:z("inset-0 absolute p-0 m-0",l.panning&&"cursor-grabbing"),operationalPoints:Z,swapAxis:S,spaceOrigin:0,spaceScales:Z.slice(0,-1).map((o,s)=>({from:o.position,to:Z[s+1].position,...M==="linear"?{size:50*l.yZoomLevel}:{coefficient:150/l.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/l.xZoomLevel,xOffset:l.xOffset,yOffset:l.yOffset,onPan:({initialPosition:o,position:s,isPanning:i})=>{const e=j(o,s);r(a=>{if(i)if(a.panning){const{initialOffset:m}=a.panning;return{...a,xOffset:m.x+e.x,yOffset:m.y+e.y}}else return{...a,panning:{initialOffset:{x:a.xOffset,y:a.yOffset}}};else return{...a,panning:null}})},onZoom:({delta:o,position:{x:s,y:i}})=>{r(e=>{const a={...e};return a.xZoomLevel=Math.min(Math.max(a.xZoomLevel*(1+o/10),N),w),a.yZoomLevel=Math.min(Math.max(a.yZoomLevel*(1+o/10),x),X),a.xOffset=s-(s-e.xOffset)/e.xZoomLevel*a.xZoomLevel,a.yOffset=i-(i-e.yOffset)/e.yZoomLevel*a.yZoomLevel,a})}},Y.map(o=>T.createElement(H,{key:o.id,path:o,color:o.color})),q.map(({from:o,to:s},i)=>T.createElement(J,{key:i,from:o,to:s})),G.map((o,s)=>T.createElement(Q,{key:s,...o})),T.createElement(W,null)))},me={title:"SpaceTimeChart/Additional data",component:$,argTypes:{swapAxis:{name:"Swap time and space axis?",defaultValue:!1,control:{type:"boolean"}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}}}},_={name:"Default arguments",args:{swapAxis:!1,spaceScaleType:"linear"}};var b,h,k;_.parameters={..._.parameters,docs:{...(b=_.parameters)==null?void 0:b.docs,source:{originalSource:`{
  name: 'Default arguments',
  args: {
    swapAxis: false,
    spaceScaleType: 'linear'
  }
}`,...(k=(h=_.parameters)==null?void 0:h.docs)==null?void 0:k.source}}};const fe=["DefaultArgs"];export{_ as DefaultArgs,fe as __namedExportsOrder,me as default};
