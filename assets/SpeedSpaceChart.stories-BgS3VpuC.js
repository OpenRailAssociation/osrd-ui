import{R as p,r as L}from"./index-RYns6xqu.js";/* empty css              */import{N as C1,w as b1,j as H1,_ as D1,X as B1}from"./index.esm-CkK1enDk.js";import{c as Ie}from"./index-Cm1LdsEh.js";import{x as Ve}from"./index.esm-O4q8kw9A.js";import{c as Y}from"./index-CHvE9HB5.js";import{z as g1,s as ve,i as F1,t as k1,p as V1}from"./zoom-Dlo3bKEm.js";const A1={detailsBoxDisplay:{reticleInfos:"Reticle infos",energySource:"Energy Source",tractionStatus:"Traction Status",declivities:"Declivities",electricalProfiles:"Electrical Profiles",powerRestrictions:"Power Restrictions"},layersDisplay:{context:"Context",steps:"Steps",declivities:"Declivities",speedLimits:"Speed Limits",temporarySpeedLimits:"Temporary Speed Limits",electricalProfiles:"Electrical Profiles",powerRestrictions:"Power Restrictions",speedLimitTags:"Speed Limit Tags"}},X1={BB01:{color:"rgb(228, 178, 132)",heightLevel:0},BB02:{color:"rgb(202, 149, 109)",heightLevel:1},BB03:{color:"rgb(175, 120, 85)",heightLevel:2},AA01:{color:"rgb(171, 201, 133)",heightLevel:0},AA02:{color:"rgb(156, 187, 121)",heightLevel:1},AA03:{color:"rgb(142, 172, 111)",heightLevel:2},AA04:{color:"rgb(125, 155, 98)",heightLevel:3},AA05:{color:"rgb(109, 139, 86)",heightLevel:4},AA06:{color:"rgb(93, 123, 73)",heightLevel:5},AA07:{color:"rgb(79, 108, 62)",heightLevel:6},AA08:{color:"rgb(63, 92, 51)",heightLevel:7},AA09:{color:"rgb(47, 76, 38)",heightLevel:8}},W1={slopes:{boundaries:[727e3,741e3,813e3,978e3,1068e3,1541e3,1741e3,1991e3,2005e3,2085e3,2191e3,2663e3,2771e3,2894e3,2944e3,3079e3,3333e3,3451e3,347e4,3856e3,3896e3,4095e3,423e4,4306e3,4344e3,4399e3,5559e3,5563e3,5672e3,5747e3,5919e3,5951e3,6169e3,6636e3,6733e3,7167e3,7449e3,7878e3,8096e3,8205e3,8385e3,8507e3,8633e3,9053e3,9365e3,9508e3,9666e3,9958e3,10024e3,10154e3,10522e3,10794e3,10866e3,11823e3,11935e3,12191e3,12291e3,12534e3,12678e3,1326e4,13434e3,13495e3,14318e3,14726e3,149e5,15062e3,15152e3,15559e3,15655e3,1603e4,1612e4,16302e3,16498e3,16733e3,16813e3,17835e3,1796e4,18211e3,18311e3,18919e3,19244e3,20776e3,21026e3,23176e3,23256e3,23487e3,23987e3,24737e3,25007e3,2567e4,25944e3,26749e3,27045e3,27209e3,27289e3,27982e3,28222e3,28935e3,2906e4,29659e3,29799e3,30734e3,31684e3,32409e3,32984e3,35134e3,35502e3,35699e3,35779e3,36428e3,37228e3,38755e3,39305e3,40022e3,40122e3,40597e3,40997e3,42081e3,42281e3,42846e3,43071e3,44702e3,45377e3,46408e3,47013e3,47613e3,4808e4,48555e3,4904e4,4919e4,50221e3,50431e3,50611e3,51107e3,51621e3,51845e3,55567e3,56601e3,56686e3,58185e3,58338e3,58909e3,59061e3,59413e3,59488e3,59865e3,59953e3,61293e3,61618e3,61765e3,6199e4,62272e3,62522e3,62683e3,62921e3,63041e3,63253e3,65674e3,65824e3,66245e3,6652e4,6656e4,67525e3,67565e3,6784e4,68169e3,68369e3,68753e3,68878e3,69251e3,69513e3,69885e3,70147e3,70307e3,70445e3,70801e3,70941e3,71411e3,71611e3,73106e3,73286e3,7396e4,7408e4,74635e3,74795e3,76208e3,76388e3,76928e3,77088e3,77442e3,77602e3,77976e3,78096e3,78913e3,78953e3,81129e3,81379e3,82082e3,82986e3,83528e3,8397e4,84968e3,8521e4,87053e3,87173e3,87985e3,88265e3,88765e3,88925e3,89181e3,89241e3,90263e3,90511e3,91021e3,91391e3,91783e3,92058e3,92137e3,92412e3,92537e3,92774e3,93062e3,93249e3,93615e3,93895e3,9448e4,9468e4,96004e3,96129e3,97086e3,97286e3,97659e3,97934e3,98716e3,99317e3,99907e3,100127e3,10073e4,101198e3,101567e3,101647e3,103939e3,104201e3,104503e3,105003e3,105224e3,105462e3,107028e3,107303e3,108295e3,10847e4,108738e3,108963e3,109986e3,110211e3,111134e3,111684e3,112697e3,114496e3,114696e3,115176e3,115326e3,115511e3,116001e3,116173e3,116323e3,116667e3,116867e3,117295e3,117445e3,118827e3,118927e3,119818e3,119918e3,120452e3,120627e3,121144e3,121419e3,122705e3,12283e4,123188e3,123328e3,123753e3,123965e3,124754e3,124929e3,125588e3,126463e3,126713e3,126927e3,127311e3,127828e3,128628e3,128801e3,129607e3,130516e3,130666e3,131132e3,131472e3,131802e3,132002e3,132473e3,132623e3,133037e3,134107e3,134882e3,135032e3,135516e3,135941e3,136494e3,137234e3,137677e3,138337e3,139128e3,139328e3,14047e4,14055e4,140875e3,141025e3,141813e3,141973e3,142417e3,142742e3,143255e3,14358e4,144292e3,144417e3,145358e3,145483e3,146496e3,146776e3,147148e3,147504e3,147592e3,147837e3,147887e3,148181e3,148455e3,148495e3,149459e3,149873e3,149948e3,151119e3,151269e3,152127e3,152402e3,154008e3,154108e3,154833e3,154933e3,155813e3,155913e3,156653e3,157867e3,159197e3,159586e3,159986e3,161027e3,161427e3,162043e3,162668e3,162799e3,163074e3,163888e3,164663e3,166176e3,166576e3,167305e3,167435e3,168203e3,168456e3,169847e3,170059e3,171332e3,171482e3,172751e3,173026e3,174177e3,174552e3,175213e3,175588e3,17619e4,176665e3,177943e3,178231e3,178611e3,178739e3,179146e3,179187e3,179553e3,180175e3,180892e3,181213e3,181714e3,181864e3,182074e3,182264e3,182314e3,182436e3,182664e3,182714e3,182814e3,183064e3,183114e3,184614e3,184964e3,185064e3,186514e3,186614e3,186714e3,186814e3,187264e3,189364e3,190064e3,190214e3,190314e3,190364e3,190564e3,190664e3,190764e3,190864e3,191064e3,191214e3,191314e3,191414e3,191514e3,192764e3,193014e3,193464e3,193614e3,193664e3,194564e3,195114e3,195464e3,196014e3,196464e3,197564e3,197934e3,198089e3,198303e3,198464e3,199614e3,199664e3,200014e3,200064e3,200164e3,200464e3,200514e3,200564e3,201649e3],values:[0,7.7,4.1,0,3.3,0,8.4,4.2,6.3,0,9.3,11.5,11.3,0,11.3,0,6.5,1,0,10,0,1,4,.1,-.3,.1,0,1.1,0,1.1,1.6,2,0,-20,0,-25,0,3,0,25,0,7,0,16,0,-10,0,3,0,8.5,0,-14.5,0,-10,0,-3.1,0,2,0,14,0,-.5,0,-.5,0,-15,0,-12,0,-4,0,-1,0,13,0,15,0,20,20.6,20,0,7,0,-3,0,-6.2,0,25,0,11.5,0,11.5,0,-7,0,-5,0,-20,0,-25,0,-18,0,20,0,-3,0,20,0,25,0,-25,0,-3,0,1,0,17,0,25,0,16,0,-11,-10,0,14,0,-5,0,1,0,16,0,-15,0,1,2,0,-1.4,0,-7.6,0,-1.5,0,1.5,0,-2,0,-15,0,-6,0,4,0,13.5,0,5,0,-1,0,-1,0,-1,0,-1,0,-9,0,-4,0,6.5,0,-4,0,1.5,0,-2,0,3,0,-1.5,0,1.5,0,-2.5,0,2,0,-2,0,2,0,-1,0,-2,0,8,0,-10,0,7.7,0,-2,0,-5,0,2,0,-2,0,-.5,0,5.7,0,-5,0,-5,0,-5,0,4.5,0,-3,0,4,0,-4,0,1,0,6,0,-5,0,-2.5,0,3,0,-4,0,-2,0,8.5,0,-11.5,0,-2,0,9,0,2,0,11,0,20,0,-2,-1,0,-9,0,-3,0,2,0,-4,0,4,0,-2,0,2,0,-2,0,-9,0,2,0,-3,0,-6.5,0,2,0,-5,-4,0,6,7,8,0,-24,0,7.5,0,15,0,-2,0,3,0,-3,0,2,0,8,0,25,0,-12,0,6,0,-2,0,-4,0,2,0,-2,0,-15,0,-2,0,3,0,-2,-1,0,.5,0,-3,0,-1,0,-1,0,-1,0,-4,0,2,0,-9,0,-11.5,0,-7.5,0,-5,-6,0,20,0,4,0,20,0,-5,0,6,0,-25,0,-9,0,-14.6,0,-4.5,0,4,0,-2,0,-13,0,2,0,17,0,-2,0,-20,0,-12,0,-12,0,-2.1,-1.8,-2.1,-1.5,0,-1.5,.2,-.2,0,.2,0,.4,-.4,-1.7,-1.2,-2.4,-1.3,0,-.2,0,-.3,.9,2.2,1.6,0,.4,-.6,0,.5,-.5,.2,-.2,0,-.2,.1,-.9,-3.1,-4.1,-3.2,-4.8,-3.1,-2.8,-.8,0,-.2,-1.8,-1.7,-.5,-2.6,-1.5,-1.4,-2.4,-1.3,.6,2.9,5.5,3.8,1,-.8,0]},electrifications:{boundaries:[7179e3,7767e3,63981e3,64172e3,94149e3,94341e3,13194e4,132132e3,180517e3,180617e3,181341e3,201544e3],values:[{type:"electrification",voltage:"1500V"},{type:"neutral_section",lower_pantograph:!0},{type:"electrification",voltage:"25000V"},{type:"neutral_section",lower_pantograph:!1},{type:"electrification",voltage:"25000V"},{type:"neutral_section",lower_pantograph:!1},{type:"electrification",voltage:"25000V"},{type:"neutral_section",lower_pantograph:!1},{type:"electrification",voltage:"25000V"},{type:"neutral_section",lower_pantograph:!1},{type:"electrification",voltage:"25000V"},{type:"electrification",voltage:"1500V"}]},operational_points:[{extensions:{ch:"BV",identifier:{name:"Paris-Montparnasse"}},position:0},{extensions:{ch:"00",identifier:{name:"Paris-Vaugirard"}},position:341e3},{extensions:{ch:"AV",identifier:{name:"Paris-Montparnasse"}},position:1014e3},{extensions:{ch:"AV",identifier:{name:"Paris-Montparnasse"}},position:1078e3},{extensions:{ch:"VO",identifier:{name:"Paris-Montparnasse"}},position:19e5},{extensions:{ch:"04",identifier:{name:"Vanves-Malakoff"}},position:2005e3},{extensions:{ch:"04",identifier:{name:"Vanves-Malakoff"}},position:2085e3},{extensions:{ch:"05",identifier:{name:"Vanves-Malakoff"}},position:2332e3},{extensions:{ch:"BI",identifier:{name:"Vanves-Malakoff"}},position:2701e3},{extensions:{ch:"AP",identifier:{name:"Montrouge-Châtillon"}},position:3856e3},{extensions:{ch:"AP",identifier:{name:"Montrouge-Châtillon"}},position:3856e3},{extensions:{ch:"SE",identifier:{name:"Montrouge-Châtillon"}},position:3927e3},{extensions:{ch:"SE",identifier:{name:"Montrouge-Châtillon"}},position:3943e3},{extensions:{ch:"SE",identifier:{name:"Montrouge-Châtillon"}},position:3959e3},{extensions:{ch:"M2",identifier:{name:"Montrouge-Châtillon"}},position:4306e3},{extensions:{ch:"01",identifier:{name:"Montrouge-Châtillon"}},position:4306e3},{extensions:{ch:"AT",identifier:{name:"Montrouge-Châtillon"}},position:4331e3},{extensions:{ch:"M2",identifier:{name:"Montrouge-Châtillon"}},position:4407e3},{extensions:{ch:"GR",identifier:{name:"Montrouge-Châtillon"}},position:4465e3},{extensions:{ch:"01",identifier:{name:"Montrouge-Châtillon"}},position:4666e3},{extensions:{ch:"AT",identifier:{name:"Montrouge-Châtillon"}},position:5338e3},{extensions:{ch:"AT",identifier:{name:"Montrouge-Châtillon"}},position:5341e3},{extensions:{ch:"ES",identifier:{name:"Montrouge-Châtillon"}},position:5559e3},{extensions:{ch:"ES",identifier:{name:"Montrouge-Châtillon"}},position:5563e3},{extensions:{ch:"ES",identifier:{name:"Montrouge-Châtillon"}},position:5617e3},{extensions:{ch:"01",identifier:{name:"Massy-TGV"}},position:11377e3},{extensions:{ch:"04",identifier:{name:"Massy-TGV"}},position:11457e3},{extensions:{ch:"11",identifier:{name:"Massy-TGV"}},position:13266e3},{extensions:{ch:"E3",identifier:{name:"Massy-TGV"}},position:13495e3},{extensions:{ch:"E3",identifier:{name:"Massy-TGV"}},position:1364e4},{extensions:{ch:"BV",identifier:{name:"Massy-TGV"}},position:13917e3},{extensions:{ch:"S3",identifier:{name:"Massy-TGV"}},position:14284e3},{extensions:{ch:"00",identifier:{name:"Poste 12 Marcoussis"}},position:24888e3},{extensions:{ch:"00",identifier:{name:"Poste 13 St-Arnoult"}},position:44154e3},{extensions:{ch:"RA",identifier:{name:"Poste 13 St-Arnoult"}},position:55666e3},{extensions:{ch:"BT",identifier:{name:"Poste 14 St-Léger"}},position:65984e3},{extensions:{ch:"00",identifier:{name:"Poste 14 St-Léger"}},position:66757e3},{extensions:{ch:"00",identifier:{name:"Poste 14 St-Léger"}},position:67322e3},{extensions:{ch:"00",identifier:{name:"Poste 15 Rouvray"}},position:91839e3},{extensions:{ch:"00",identifier:{name:"Poste 16 Dangeau"}},position:113593e3},{extensions:{ch:"BI",identifier:{name:"Courtalain-TGV-Bifurcation"}},position:129814e3},{extensions:{ch:"BI",identifier:{name:"Courtalain-TGV-Bifurcation"}},position:129814e3},{extensions:{ch:"17",identifier:{name:"Poste 17"}},position:13373e4},{extensions:{ch:"00",identifier:{name:"Poste 31 Plessis"}},position:14922e4},{extensions:{ch:"00",identifier:{name:"Poste 32 Dollon"}},position:17233e4},{extensions:{ch:"BP",identifier:{name:"Poste 33 Connerré"}},position:178858e3},{extensions:{ch:"BP",identifier:{name:"Poste 33 Connerré"}},position:179187e3},{extensions:{ch:"S1",identifier:{name:"Connerré-Beillé"}},position:181509e3},{extensions:{ch:"S2",identifier:{name:"Connerré-Beillé"}},position:182367e3},{extensions:{ch:"BV",identifier:{name:"Montfort-le-Gesnois"}},position:184452e3},{extensions:{ch:"GA",identifier:{name:"Montfort-le-Gesnois"}},position:184564e3},{extensions:{ch:"00",identifier:{name:"St-Mars-la-Brière"}},position:187776e3},{extensions:{ch:"00",identifier:{name:"Champagné"}},position:190201e3},{extensions:{ch:"00",identifier:{name:"Yvré-l'Évêque"}},position:194664e3},{extensions:{ch:"DO",identifier:{name:"Le Mans"}},position:199484e3},{extensions:{ch:"PE",identifier:{name:"Le Mans"}},position:200406e3},{extensions:{ch:"BV",identifier:{name:"Le Mans"}},position:201649e3}]},Y1=[{code:"FFFF",handled:!0,start:0,stop:6503965},{code:"FFFF",handled:!1,start:6503965,stop:7106965},{code:"FFFF",handled:!0,start:7106965,stop:53305965},{code:"FFFF",handled:!1,start:63305965,stop:63996965},{code:"AAAA",handled:!1,start:63996965,stop:93473965},{code:"AAAA",handled:!1,start:93473965,stop:94165965},{code:"FFFF",handled:!0,start:94165965,stop:131273965},{code:"FFFF",handled:!1,start:131273965,stop:131965965},{code:"GGGG",handled:!0,start:131965965,stop:179005965},{code:"GGGG",handled:!1,start:179005965,stop:179011965},{code:"GGGG",handled:!0,start:179011965,stop:179841965},{code:"BBBB",handled:!1,start:179841965,stop:180550965},{code:"BBBB",handled:!0,start:180550965,stop:201649e3}],U1={mrsp:{boundaries:[781e3,791e3,1591e3,5151e3,15379e3,15529e3,15541e3,179183e3,199589e3,199688e3,200589e3,201417e3],values:[16.667,25,30.556,41.667,55.556,61.111,75,80,61.111,38.889,44.444,27.778,33.333]},base:{positions:[0,922,3688,14738,33127,74410,132026,179431,312522,1181e3,1288529,1410584,1593713,1798772,2269239,2890597,3117922,3510416,3834614,5551e3,6349317,6739144,7373916,7416220,8025531,8808e3,9512e3,9816e3,10088e3,10328e3,10536e3,10671e3,10823e3,10943e3,11031e3,11076e3,11096e3,11108e3,11111e3,11112e3,11112e3,11113088,11116349,11129358,11150930,11180914,11219123,11265433,11381785,11568786,11798714,12013651,12254170,12657890,12952643,13503835,14476858,15700347,16033578,16607825,16960750,18275486,19120373,19608044,20857925,22834388,24090622,24939192,27062068,28516852,29743309,30076075,31996055,32633397,33134860,35854859,36650181,37394088,41234088,42508153,42982704,44865967,45492495,46044508,110499988,111296050,111996225,123414e3,124914e3,125589e3,126214e3,126789e3,127314e3,127789e3,128214e3,128589e3,128914e3,129189e3,129414e3,129589e3,129645e3,129714e3,12975e4,129789e3,129805e3,12981e4,129813e3,129814e3,129814e3,129814849,129817394,129821631,129827554,129844432,129867956,129898033,129977359,130110954,130244287,130399902,130575472,130820347,131948401,132338926,133400200,133994326,134517412,135173978,135972111,136205805,136557173,136791447,137387677,137880354,138386828,139424513,141185450,142892157,143629625,144535353,145610761,147400574,161623080,162261293,162684553,175964518,176092226,177143e3,177983e3,178751e3,179336e3,179972e3,180447e3,180951e3,181316e3,181631e3,181896e3,182031e3,182148e3,182216e3,182303e3,182372e3,182423e3,182456e3,182468e3,182471e3,182472e3,182472e3,182472922,182475688,182486739,182505132,182546426,182604064,182651492,182767655,182911371,183036119,183272731,183602979,183917445,184267422,184652242,185070794,185903718,186936483,187831316,189004598,197366800,197977774,198612442,199086332,199589e3,199848263,200219664,200589e3,200877383,201073e3,201208e3,201325e3,201453e3,201528e3,201568e3,2016e5,201633e3,201645e3,201648e3,201649e3],speeds:[0,.922252864428832,1.8432032114946648,3.681032132931539,5.5128202736486145,8.245289212510947,10.956016119575583,12.743963061768026,16.667,16.667,19.16127542272484,21.47939181176482,24.289739579280024,26.944178905714292,31.825920597414292,37.18351310226573,38.50212797454354,40.01165452968707,41.667,41.667,47.088203761664126,50.4366562404313,55.333814340659146,55.556,55.556,48,40,36,32,28,24,21,17,13,9,6,4,2,1,0,0,1.0880796443349603,2.1731673171715498,4.328352917287148,6.452715501575347,8.533029368614802,10.56815383217758,12.584805187471066,16.450744826048936,20.889894902961235,25.148492311030772,28.52456451174802,31.55098693743422,35.64905496613374,37.927571571668494,40.90054537261944,47.525572064418235,54.717435952230645,56.30218312647379,58.4364578800575,59.13546963171487,60.37131837833933,60.43382923841525,61.490902444663654,63.4749479936392,68.38463645699615,71.04266555407018,70.25917292885592,71.22248570722746,74.40929429502576,79.01118488495588,80,79.97983645720491,79.44944905955225,80,79.99894271354704,79.06369073938752,80,80,79.38662048434308,78.77358104166666,78.0138404118927,78.72410442059248,80,79.99935183050927,79.24876040248746,80,80,70,65,60,55,50,45,40,35,30,25,20,15,13,10,8,5,3,2,1,0,0,.848908853697111,1.6960342277655154,2.5407547039829397,3.3824517705630495,5.054202047846467,6.7051175881546765,8.329672598534456,11.477643323014023,15.221362678577012,18.08822561414351,20.770852318449418,23.08705472745882,25.880770253256077,37.413505356788704,40.61124065890666,47.88257568194426,51.08914582393474,53.460629386473215,55.922741161350174,58.17420202690162,58.60341345974053,58.471956424707976,58.73174830893901,60.577612920554664,62.597072415007176,63.952572685368914,65.71082860489605,69.72172006798219,72.65215049118311,74.7312928117894,76.22074261441605,77.39327427819816,80,80,79.56756201136442,80,79.96491092434351,79.87348712448274,73,67,61,56,50,45,39,34,29,24,21,18,16,13,10,7,4,2,1,0,0,.9223351135201904,1.8433844506966532,3.681528757028122,5.513899540767509,8.2480208016856,10.960806148165451,12.751306291994734,16.271613473834353,19.62745820100879,21.906050415159513,25.407894805927288,29.65472236064539,33.23145355167369,36.7544416543863,40.191456780987146,43.48752288842326,48.94875877059886,54.16649635536371,57.58191254927586,61.111,61.111,55.889,49.889,44.889,38.889,38.889,33.778,27.778,27.778,24,21,18,14,11,9,7,4,2,1,0]},final_output:{positions:[0,922,3688,14738,33127,74410,132026,179431,312522,1181e3,1327657,1454254,1642974,1853292,2465604,2816804,3041292,3397611,3774306,4368938,6275998,6482909,7355262,7660603,8188099,8772437,9328398,9999412,10328e3,10583e3,10788e3,10856e3,10943e3,11031e3,11063e3,11096e3,11103e3,11108e3,11111e3,11112e3,11112e3,11113088,11116349,11129358,11150930,11180914,11241269,11291599,11415602,11568786,11849892,12071489,12317991,12587241,12877289,13503835,14289072,15700347,16260678,16607825,17079182,18275486,19120373,19608044,20857925,22834388,24090622,24939192,26777748,27062068,27676951,28488749,29799167,30836020,31998816,32592880,32985597,35880431,36334209,36735184,37312865,37600560,38920769,41356536,42543970,42986806,43428243,44748249,45040625,45709679,46768094,104214308,105060953,107513525,108489827,109306029,110489741,111243592,111608995,114805977,115729732,116982331,117653377,119081999,120156307,120790241,121527973,122975640,124086856,125080966,126745286,127608213,128133e3,128589e3,128973e3,129285e3,12949e4,129589e3,12967e4,129733e3,129778e3,129789e3,129805e3,12981e4,129813e3,129814e3,129814e3,129814849,129817394,129821631,129835157,129855368,129882182,129915493,130001075,130142128,130281156,130442049,130872662,131660269,132023908,132338926,133118188,133792032,134410930,135286168,136088744,136791447,137387677,137880354,138386828,139424513,141185450,142892157,143629625,144535353,145610761,146622716,150008300,151348965,152519038,155836650,158260084,159240243,159925358,161517744,162158888,162409341,163152948,164124863,164719846,164956750,166301425,167683443,168441193,170078398,171552102,173099618,174521963,175700414,176385696,176941175,178364890,179412457,180071e3,180708e3,181247e3,181448e3,181688e3,181847e3,182031e3,182148e3,182276e3,182351e3,182391e3,182423e3,182456e3,182468e3,182471e3,182472e3,182472e3,182472922,182475688,182480295,182495019,182517073,182563829,182651492,182801054,182951423,183126563,183377163,183724471,184053206,184494194,184899423,185337417,185806392,186407018,186923975,190487986,191966099,193121805,195396353,196786662,199130010,199589e3,199848263,200219664,200589e3,200877383,201073e3,201208e3,201325e3,201453e3,201528e3,201568e3,2016e5,201633e3,201645e3,201648e3,201649e3],speeds:[0,.922252864428832,1.8432032114946648,3.681032132931539,5.5128202736486145,8.245289212510947,10.956016119575583,12.743963061768026,16.667,16.667,19.96623438843976,22.19032367921571,24.971655484612427,27.576762258088724,33.62746080828414,36.60981884860606,38.12828024104525,39.55787770157515,37.92799059602488,36.453736442313776,34.33650910339113,34.7214312088513,38.06659474757526,38.0739750647878,37.27037717588434,35.85218581090704,33.71273397822338,33.3554853428465,28,23,18,16,13,9,7,4,3,2,1,0,0,1.0880796443349603,2.1731673171715498,4.328352917287148,6.452715501575347,8.533029368614802,11.578596057614858,13.58096360922479,17.36574452330376,20.889894902961235,26.029894976461925,29.31316013719301,32.26954325583691,34.99977778683216,37.42642990174668,40.90054537261944,46.36261122129839,54.717435952230645,57.23538351577676,58.4364578800575,59.29586892871918,60.37131837833933,60.43382923841525,61.490902444663654,63.4749479936392,68.38463645699615,71.04266555407018,70.25917292885592,70.97525719320242,71.22248570722746,72.50156183133969,72.05794039396218,73.68428011013631,74.52197265625,74.52106043004683,74.06222500782611,74.52197265625,74.5213107004081,73.99258520412121,72.592664320784,71.87477788163696,72.05700369650262,74.52197265625,74.52194857839612,74.0882925392638,73.52795860375096,73.62572035072239,73.04454171269623,73.1976335666956,74.42452083986733,74.52197265625,74.52197265625,73.16955532180287,70.85822150446374,68.62754753834564,67.32190600234865,64.31528977597556,61.33109509065274,60.60910764878786,57.77672391352349,57.56068353053685,56.41166639399605,55.46455126023675,54.416358990456615,53.05227218757189,52.62759158446942,52.65249993325487,50.77085713857922,50.337892372935634,49.10568609209091,48.720536043407456,46.96580168084646,41,35,29,23,18,15,12,9,6,5,3,2,1,0,0,.848908853697111,1.6960342277655154,2.5407547039829397,4.220503728530958,5.882660684018407,7.520982656302545,9.130611416553611,12.238261565499784,15.952260406855538,18.78146376103532,21.376886773118464,26.43418136867685,34.606654501251455,38.09363243870024,40.61124065890666,46.09350952460838,50.05366528911763,53.02108451278334,56.267744414641115,58.45827400761744,58.73174830893901,60.577612920554664,62.597072415007176,63.952572685368914,65.71082860489605,69.72172006798219,72.65215049118311,74.7312928117894,76.22074261441605,77.39327427819816,78.93241040756683,75.03995748590482,73.94732500488408,72.33413451141409,71.91517798499102,70.59357643229748,69.42904217691606,67.5834730309205,65.1241069855928,62.92886357356531,62.35624865956813,61.61682684694575,59.84638327137239,59.183896249663185,59.337396406944,62.867948986562006,62.8235808925875,63.402118211404,62.549669367692466,60.20049963187712,58.84308009066301,59.656022567418425,58.16452911881794,55.960343335684094,55.26469714105155,54.27602459226894,55.31313494267673,49,42,35,32,28,25,21,18,14,11,9,7,4,2,1,0,0,.9223351135201904,1.8433844506966532,2.7631237027637883,4.598518656365225,6.42731470610968,9.155128943086304,12.751306291994734,17.128120269008537,20.424574151036634,23.314004833020167,26.80931355311448,31.090540104686145,34.64768330085553,38.83029281724731,42.19344549280696,45.37945363835749,48.37710619907019,51.67716314317588,54.11202327497078,49.98481297207787,48.59850075718484,47.74483950953814,46.961127407046085,45.7290216956976,44.39981947518151,38.889,38.889,33.778,27.778,27.778,24,21,18,14,11,9,7,4,2,1,0]},electrical_profiles:{boundaries:[7179e3,7767e3,63981e3,64172e3,94149e3,94341e3,13194e4,132132e3,180517e3,180617e3,181341e3,201649e3],values:[{electrical_profile_type:"profile",profile:"AA01",handled:!0},{electrical_profile_type:"no_profile"},{electrical_profile_type:"profile",profile:"BB02",handled:!0},{electrical_profile_type:"no_profile"},{electrical_profile_type:"profile",profile:"BB03",handled:!0},{electrical_profile_type:"no_profile"},{electrical_profile_type:"profile",profile:"BB01",handled:!0},{electrical_profile_type:"no_profile"},{electrical_profile_type:"profile",profile:null,handled:!0},{electrical_profile_type:"no_profile"},{electrical_profile_type:"profile",profile:"BB02",handled:!0},{electrical_profile_type:"profile",profile:"AA03",handled:!0}]}},$1={boundaries:[0,25e6,65e6,95e6,125e6,201649e3],values:[{speed_limit_tags_type:"tag",tag_name:"MA100",color:"#494641"},{speed_limit_tags_type:"tag",tag_name:"EVO",color:"#216482"},{speed_limit_tags_type:"tag",tag_name:"incompatible",color:"#EAA72B"},{speed_limit_tags_type:"tag",tag_name:"UU",color:"#D91C1C"},{speed_limit_tags_type:"tag",tag_name:"missing_from_train",color:"#94918E"}]},Ne=e=>e*3.6,b=e=>e/1e6,w1=e=>{const{positions:t,speeds:s}=e;return s.map((o,n)=>({position:{start:b(t[n])},value:Ne(o)}))},K1=e=>{const{positions:t,speeds:s}=e;return s.map((o,n)=>({position:{start:b(t[n])},value:Ne(o)}))},q1=e=>{const{boundaries:t,values:s}=e;return{boundaries:t.map(b),values:s.map((o,n)=>({speed:Ne(o),isTemporary:(n+1)%4==0}))}},z1=e=>e.map(({position:t,extensions:s})=>({position:{start:b(t)},value:`${s.identifier.name} ${s.ch!=="00"?s.ch:""}`})),j1=e=>e.values.map((t,s)=>({position:{start:b(s===0?0:e.boundaries[s-1]),end:b(e.boundaries[s])},value:{type:t.type,voltage:t.voltage,lowerPantograph:t.lower_pantograph}})),Z1=e=>e.values.map((t,s)=>({position:{start:b(s===0?0:e.boundaries[s-1]),end:b(e.boundaries[s])},value:t})),J1=(e,t)=>e==="1500V"&&(t==null?void 0:t.startsWith("BB"))||e==="25000V"&&(t==null?void 0:t.startsWith("AA")),Q1=(e,t,s)=>e==="no_profile"?{electricalProfile:"neutral"}:t===null||t&&J1(s,t)?{electricalProfile:"incompatible",color:s==="1500V"?"rgb(171, 201, 133)":"rgb(228, 178, 132)"}:{electricalProfile:t,...X1[t]},x1=(e,t)=>e.electrical_profiles.values.map(({electrical_profile_type:s,profile:o},n)=>{const i=t.find(({position:a})=>a.start>=(n===0?0:b(e.electrical_profiles.boundaries[n-1]))&&a.end<=b(e.electrical_profiles.boundaries[n]));return{position:{start:b(n===0?0:e.electrical_profiles.boundaries[n-1]),end:b(e.electrical_profiles.boundaries[n])},value:Q1(s,o,i.value.voltage)}}),et=e=>e.map(({code:t,handled:s,start:o,stop:n})=>({position:{start:b(o),end:b(n)},value:{powerRestriction:t,handled:s}})),tt=e=>e.values.map(({tag_name:t,color:s},o)=>({position:{start:b(e.boundaries[o]),end:b(e.boundaries[o+1])},value:{tag:t,color:s}})),st=(e,t,s,o)=>{const n=w1(e.base),i=K1(e.final_output),a=q1(e.mrsp),r=z1(t.operational_points),f=j1(t.electrifications),l=Z1(t.slopes),c=et(s),T=x1(e,f),u=tt(o);return{speeds:n,ecoSpeeds:i,mrsp:a,stops:r,electrifications:f,slopes:l,electricalProfiles:T,powerRestrictions:c,speedLimitTags:u,trainLength:400}},ot=({reset:e,openSettingsPanel:t,store:s})=>p.createElement("div",{id:"interaction-button-container",className:"z-10"},p.createElement("div",{className:"zoom-buttons"},p.createElement("button",{className:Ie("interaction-button reset-button",{inactive:s.ratioX==1&&s.leftOffset==0}),onClick:()=>e()},p.createElement(C1,null)),p.createElement("button",{className:"interaction-button plus-button inactive"},p.createElement(b1,null)),p.createElement("button",{className:"interaction-button inactive"},p.createElement(H1,null))),p.createElement("button",{className:"interaction-button elipsis-button",onClick:()=>t()},p.createElement(D1,null))),nt="#CFDDCE",it=2,y1={Y_LEFT_VERTICAL:30,Y_LEFT_HORIZONTAL:22,Y_RIGHT_VERTICAL:36,Y_RIGHT_HORIZONTAL:42},R={MARGIN_LEFT:48,MARGIN_RIGHT:12,MARGIN_TOP:27,MARGIN_BOTTOM:52.5,CURVE_MARGIN_TOP:40,CURVE_MARGIN_SIDES:16,ELECTRICAL_PROFILES_MARGIN_TOP:8,RIGHT_TICK_MARGINS:60,OFFSET_RIGHT_AXIS:42},at=6,v={ELECTRICAL_PROFILES_HEIGHT:56,POWER_RESTRICTIONS_HEIGHT:40,SPEED_LIMIT_TAGS_HEIGHT:40},Xe={electricalProfiles:v.ELECTRICAL_PROFILES_HEIGHT,powerRestrictions:v.POWER_RESTRICTIONS_HEIGHT,speedLimitTags:v.SPEED_LIMIT_TAGS_HEIGHT},ae=1,Q={FIRST:"rgb(250, 249, 245)",SECOND:"rgb(247, 246, 238)",THIRD:"rgb(242, 240, 228)"},Le="#front-interactivity-layer",rt=["energySource","tractionStatus","declivities","electricalProfiles","powerRestrictions"],lt=["steps","declivities","speedLimits","electricalProfiles","powerRestrictions","speedLimitTags"],Te=Y(0,0,0),ct=Y(255,104,104),pt=Y(217,28,28),We=Y(121,118,113),ft=Y(49,46,43),dt=Y(33,112,185),Tt=Y(234,167,43),G1=Y(255,255,255),ut={"#216482":"#E5F7FF","#D91C1C":"#F15981","#494641":"#F2F0E4","#EAA72B":"#EAA72B","#94918E":"#94918E"},mt=(e,t,s)=>{const o=s?e-102:e-60,n=t-80;return{WIDTH_OFFSET:o,HEIGHT_OFFSET:n}},Re=e=>Math.max(...e.map(({value:t})=>t)),k=e=>e.length===0?0:e[e.length-1].position.start,V=(e,t,s)=>{e.clearRect(0,0,t,s)},re=(e,t,s=!0)=>{const o=[t.electricalProfiles?v.ELECTRICAL_PROFILES_HEIGHT:0,t.powerRestrictions?v.POWER_RESTRICTIONS_HEIGHT:0,t.speedLimitTags?v.SPEED_LIMIT_TAGS_HEIGHT:0].reduce((n,i)=>n+i,0);return e+=s?o:-o},Ye=(e,t,s=!1)=>{let o=0;const{electricalProfiles:n,powerRestrictions:i}=t;return n&&(o=Xe.electricalProfiles),i&&s&&(o+=Xe.powerRestrictions),e+o-R.MARGIN_BOTTOM},W=(e,t,s,o,n)=>e*((s-n.CURVE_MARGIN_SIDES-n.MARGIN_LEFT-n.MARGIN_RIGHT)/t)*o+n.MARGIN_LEFT+n.CURVE_MARGIN_SIDES/2,_e=(e,t,s,o,n)=>{const{MARGIN_LEFT:i,MARGIN_RIGHT:a}=s;e.beginPath(),e.strokeStyle=t,e.lineWidth=1,e.moveTo(i,n),e.lineTo(o-a,n),e.stroke()},Oe=(e,t,s,o,n,i)=>{const{MARGIN_LEFT:a,MARGIN_RIGHT:r}=s;e.beginPath(),e.fillStyle=t,e.fillRect(a,n-i+ae,o-a-r,i)},Et=(e,t)=>t==="speedLimits"?e.mrsp:t==="electricalProfiles"?e.electricalProfiles:t==="powerRestrictions"?e.powerRestrictions:t==="speedLimitTags"?e.speedLimitTags:!0,P1=e=>{const t=e.slopes,s=Math.min(...t.map(({value:a})=>a)),o=Math.max(...t.map(({value:a})=>a)),n=o-s,i=Math.max(...t.map(({position:a})=>a.start));return{minGradient:s,maxGradient:o,slopesRange:n,maxPosition:i}},_t=(e,t,s,o,n,i,a)=>{const r=document.createElement("canvas"),f=r.getContext("2d");f&&(r.width=n,r.height=i,f.drawImage(t,0,0,n,i),f.globalCompositeOperation="source-in",f.fillStyle=a,f.fillRect(0,0,n,i),e.drawImage(r,s,o))},It=(e,t,s,o,n,i)=>{e.beginPath(),e.moveTo(t+i,s),e.lineTo(t+o-i,s),e.quadraticCurveTo(t+o,s,t+o,s+i),e.lineTo(t+o,s+n-i),e.quadraticCurveTo(t+o,s+n,t+o-i,s+n),e.lineTo(t+i,s+n),e.quadraticCurveTo(t,s+n,t,s+n-i),e.lineTo(t,s+i),e.quadraticCurveTo(t,s,t+i,s),e.closePath(),e.fill(),e.stroke()},Ue=e=>new Promise((t,s)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n=>s(n),o.src=e}),M1=e=>{const t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)},Me=(e,t,s)=>{if(e.length===0)return-1;if(t<s(e[0]))return 0;if(t>s(e[e.length-1]))return e.length-1;let o=0,n=e.length;for(;o<n;){const i=Math.floor((o+n)/2);s(e[i])<t?o=i+1:n=i}return t!==s(e[o])&&o--,o},Rt=e=>e/1e3,w=(e,t,s,o,n=0)=>{const i=s-R.MARGIN_LEFT-R.MARGIN_RIGHT-R.CURVE_MARGIN_SIDES,a=R.CURVE_MARGIN_SIDES/2+R.MARGIN_LEFT+n;return e/t*(i*o)+a},$e=(e,t,s,o,n)=>e===s?t:t+(n-e)*((o-t)/(s-e)),St=(e,t,s)=>Math.min(Math.max(e,t),s),he=(e,t,s,o,n=8)=>{let i=null;return e.filter(({position:r})=>{const f=w(r.start,o,s,t);return i!==null&&Math.abs(f-i)<n?!1:(i=f,!0)})},h1=(e,t,s)=>{const{ratioX:o,leftOffset:n}=s,i=k(s.speeds),a=e-n-R.CURVE_MARGIN_SIDES/2,r=(t-R.MARGIN_LEFT-R.MARGIN_RIGHT-R.CURVE_MARGIN_SIDES)*o;return a*i/r},v1=(e,t,s)=>{const{ratioX:o,leftOffset:n,stops:i}=s,a=k(s.speeds),r=he(i,o,t,a);let f=0;if(r.length>1){const T=St(h1(e,t,s),0,a),u=Me(r,T,m=>m.position.start),d=Math.min(u+1,r.length-1),I=T-r[u].position.start,E=r[d].position.start-T;f=I<E?u:d}else if(r.length===1)f=0;else return null;const l=r[f].position.start,c=w(l,a,t,o,n);return Math.abs(c-(e+R.MARGIN_LEFT))<at?r[f]:null},we=442,Ke=521.5,gt=({globalHeight:e,color:t,store:s,setStore:o,setIsMouseHoveringSettingsPanel:n,translations:i})=>{const[a,r]=L.useState(`${we}px`),f=()=>{n(!1),o(l=>({...l,isSettingsPanelOpened:!1}))};return L.useEffect(()=>{const l=re(0,s.layersDisplay);e<Ke+l&&r(`${e-l-(Ke-we)}px`)},[e,s.layersDisplay]),p.createElement("div",{id:"settings-panel",style:{background:`rgba(${t.substring(4,t.length-1)}, 0.4)`,height:a},className:"font-sans",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},p.createElement("div",{className:"settings-panel-section"},p.createElement("div",{className:"settings-panel-section-title"},p.createElement("span",null,(i==null?void 0:i.layersDisplay.context)||"Context")),lt.map(l=>p.createElement("div",{key:l,className:"selection"},p.createElement(Ve,{label:(i==null?void 0:i.layersDisplay[l])||l,checked:s.layersDisplay[l],disabled:!Et(s,l),onChange:()=>{o(c=>({...c,layersDisplay:{...c.layersDisplay,[l]:!c.layersDisplay[l]}}))}})))),p.createElement("div",{className:"settings-panel-section right"},p.createElement("div",{className:"settings-panel-section-title"},p.createElement("span",null,(i==null?void 0:i.detailsBoxDisplay.reticleInfos)||"Reticle infos")),rt.map(l=>p.createElement("div",{key:l,className:"selection"},p.createElement(Ve,{label:(i==null?void 0:i.detailsBoxDisplay[l])||l,checked:s.detailsBoxDisplay[l],onChange:()=>{o(c=>({...c,detailsBoxDisplay:{...c.detailsBoxDisplay,[l]:!c.detailsBoxDisplay[l]}}))}})))),p.createElement("button",{id:"close-settings-panel",onClick:()=>f()},p.createElement("span",null,p.createElement(B1,null))))},N1=()=>g1().transform(ve(Le),F1),At=e=>g1().filter(t=>t.shiftKey).on("zoom",()=>{const t=ve(Le),{k:s,x:o}=k1(t.node());s>=1?e(n=>({...n,ratioX:s,leftOffset:o})):(e(n=>({...n,ratioX:1,leftOffset:0})),t.call(N1))}),{MARGIN_LEFT:yt,MARGIN_RIGHT:qe,MARGIN_TOP:ze,MARGIN_BOTTOM:ee}=R,Ae=6,je=1,Ze=1,Gt=({ctx:e,width:t,height:s,store:o})=>{const{stops:n,ratioX:i,leftOffset:a,cursor:r}=o;if(n.length===0)return;V(e,t,s);const f=k(o.speeds),l=he(n,i,t,f);e.save(),e.translate(a,0),e.strokeStyle=dt.alpha(.5).hex(),e.lineWidth=1,e.lineCap="round",e.setLineDash([1,6]),e.beginPath(),l.forEach(({position:u})=>{const d=w(u.start,f,t,i);e.moveTo(d,ze),e.lineTo(d,s-ee)}),e.stroke(),e.lineWidth=2,e.fillStyle=We.hex(),e.strokeStyle=We.hex(),e.setLineDash([]);const c=r.x?v1(r.x,t,o):null;l.forEach(({position:u})=>{if(c&&u.start===c.position.start)return;const d=w(u.start,f,t,i);e.beginPath(),e.roundRect(d-je/2,s-Ae-ee-1,je,Ae,[Ze,Ze,0,0]),e.fill(),e.closePath(),e.stroke()}),e.restore(),he(l,i,t,f,25).forEach(({position:u,value:d})=>{if(c&&u.start===c.position.start)return;e.save();const I=w(u.start,f,t,i,a),E=s-Ae-ee-8;e.translate(I,E),e.rotate(-40*Math.PI/180),e.fillStyle=ft.alpha(.2).hex(),e.font="normal 12px IBM Plex Sans",e.textAlign="left",e.fillText(d,0,0),e.restore()}),e.clearRect(0,0,yt,s),e.clearRect(t-qe,0,qe,s),e.clearRect(0,0,t,ze),e.clearRect(0,s-ee,t,ee)},U=(e,{width:t,height:s,store:o,setStore:n})=>{const i=L.useRef(null);return L.useEffect(()=>{const r=i.current.getContext("2d");e({ctx:r,width:t,height:s,store:o,setStore:n})},[t,s,o]),i},Pt=({width:e,height:t,store:s})=>{const o=U(Gt,{width:e,height:t,store:s});return p.createElement("canvas",{id:"steps-layer",className:"absolute rounded-t-xl",ref:o,width:e,height:t})},{CURVE_MARGIN_TOP:Mt,MARGIN_RIGHT:Je,MARGIN_LEFT:ht,MARGIN_BOTTOM:vt,MARGIN_TOP:Qe}=R,xe=16,e1=8,Nt=({ctx:e,width:t,height:s,store:o})=>{const{mrsp:n,trainLength:i,ratioX:a,leftOffset:r}=o;if(!n)return;V(e,t,s),e.save(),e.translate(r,0);const f=s-vt-Qe,l=Re(o.speeds),c=k(o.speeds);e.lineCap="round";let T=w(0,c,t,a),u=null;for(let d=0;d<n.values.length;d++){const{speed:I,isTemporary:E}=n.values[d],m=d==n.values.length-1,S=m?c:n.boundaries[d],g=w(S,c,t,a),_=f-I/l*(f-Mt)+Qe;u!==null&&(e.beginPath(),e.strokeStyle=ct.alpha(.5).hex(),e.lineWidth=.5,e.moveTo(T,u),e.lineTo(T,_),e.stroke());const P=E?Tt:pt,A=e.createLinearGradient(0,_,0,_-xe);E?A.addColorStop(0,P.alpha(.23).hex()):A.addColorStop(0,P.alpha(.15).hex()),A.addColorStop(1,P.alpha(0).hex()),e.fillStyle=A,e.rect(T,_,g-T,-xe),e.fill();let G=null;!m&&n.values[d+1].speed>I&&(G=w(Math.min(S+Rt(i),c),c,t,a)),e.beginPath(),e.lineWidth=1,e.strokeStyle=P.hex(),e.moveTo(T,_),e.lineTo(G??g,_),G!==null&&(e.moveTo(G,_-e1/2),e.lineTo(G,_+e1/2)),e.stroke(),T=g,u=_}e.restore(),e.clearRect(0,0,ht,s),e.clearRect(t-Je,0,Je,s)},Lt=({width:e,height:t,store:s})=>{const o=U(Nt,{width:e,height:t,store:s});return p.createElement("canvas",{id:"speed-limits-layer",className:"absolute rounded-t-xl",ref:o,width:e,height:t})},{CURVE_MARGIN_TOP:Ot,CURVE_MARGIN_SIDES:t1}=R,s1=(e,t,s)=>{const{maxSpeed:o,maxPosition:n,ratioX:i}=t,{width:a,height:r}=e,f=a-t1,l=t1/2,c=r-Ot,T=f/n*i,u=[];return s.forEach(({position:d,value:I})=>{const E=I/o,m=d.start*T+l,S=r-E*c;u.push({x:m,y:S})}),u.push({x:n*T+l,y:r}),u.push({x:l,y:r}),u},Ct=({ctx:e,width:t,height:s,store:o})=>{const{speeds:n,ecoSpeeds:i,ratioX:a,leftOffset:r}=o,f=Y(17,101,180),l=Y(7,69,128);V(e,t,s),e.save(),e.translate(r,0);const c=Re(o.speeds),T=k(o.speeds),u=s1({width:t,height:s},{maxSpeed:c,maxPosition:T,ratioX:a},n),d=s1({width:t,height:s},{maxSpeed:c,maxPosition:T,ratioX:a},i);e.beginPath(),e.lineWidth=.5,e.strokeStyle=f.hex(),e.fillStyle=f.alpha(.15).hex(),u.forEach(({x:I,y:E})=>{e.lineTo(I,E)}),e.fill(),e.beginPath(),u.slice(0,u.length-2).forEach(({x:I,y:E})=>{e.lineTo(I,E)}),e.stroke(),e.beginPath(),e.fillStyle="rgba(255, 255, 255)",e.strokeStyle=l.hex(),e.globalCompositeOperation="destination-out",d.forEach(({x:I,y:E})=>{e.lineTo(I,E)}),e.fill(),e.beginPath(),e.globalCompositeOperation="source-over",d.slice(0,d.length-2).forEach(({x:I,y:E})=>{e.lineTo(I,E)}),e.stroke(),e.restore()},bt=({width:e,height:t,store:s})=>{const o=U(Ct,{width:e,height:t,store:s});return p.createElement("canvas",{id:"curve-layer",className:Ie("absolute rounded-t-xl",{"bg-white-25":!s.layersDisplay.declivities}),ref:o,width:e,height:t})},{CURVE_MARGIN_SIDES:ye,MARGIN_TOP:o1,MARGIN_BOTTOM:Ht,RIGHT_TICK_MARGINS:n1}=R,Dt=({ctx:e,width:t,height:s,store:o})=>{const{slopes:n,ratioX:i,leftOffset:a}=o,{maxGradient:r}=P1(o),f=k(o.speeds);if(!n||n.length===0){console.error("Slopes data is missing or empty.");return}V(e,t,s),e.save(),e.translate(a,0);const l=s-o1-Ht-n1/2,c=o1+n1/2+l/2;e.fillStyle=nt;try{const T=(t-ye)/f*i;for(let u=0;u<n.length-1;u++){const{position:d,value:I}=n[u],{position:E}=n[u+1],m=d.start*T+ye/2,g=E.start*T+ye/2-m,_=I/r*(l/2),P=I>=0?c-_:c;e.fillRect(m,P,g,Math.abs(_))}}catch(T){console.error("Error while drawing declivity:",T)}e.restore()},Bt=({width:e,height:t,store:s})=>{const o=U(Dt,{width:e,height:t,store:s});return p.createElement("canvas",{id:"declivity-layer",className:Ie("absolute rounded-t-xl",{"bg-white-25":s.layersDisplay.declivities}),ref:o,width:e,height:t})},i1=40,a1=12,Ft=30,r1=e=>e>7?7:e,kt=({ctx:e,width:t,height:s,store:o})=>{const{electricalProfiles:n,ratioX:i,leftOffset:a,cursor:r}=o,{ELECTRICAL_PROFILES_HEIGHT:f}=v;if(!n)return;V(e,t,s);const l=s-f;e.save(),e.translate(a,0);const c=k(o.speeds),{MARGIN_TOP:T,MARGIN_BOTTOM:u,MARGIN_LEFT:d,MARGIN_RIGHT:I,CURVE_MARGIN_SIDES:E,ELECTRICAL_PROFILES_MARGIN_TOP:m}=R;Oe(e,Q.FIRST,R,t,l,f),n.forEach(g=>{const _=W(g.position.start,c,t,i,R),P=W(g.position.end,c,t,i,R);let A=l-u+m;const G=P-_;if(g.value.electricalProfile==="neutral")e.fillStyle="#1F1B17",e.fillRect(_,A+28,G,9),e.clearRect(_,A+31,G,3);else{const{start:y,end:D}=g.position,{electricalProfile:N,color:B,heightLevel:O}=g.value,H=r1(O);if(e.fillStyle=B,N==="incompatible")for(let C=0;C<9;C++)e.fillRect(_,A+15+C*3,G,1);else{A+=H*4;const C=i1-H*4;if(e.fillRect(_,A,G,C),r.y&&r.x&&r.y<=l-u+T&&r.y>=l-u+T-f&&r.x-a>=_-d&&r.x-a<=_+G-d){e.globalAlpha=.2,e.fillRect(_,T,G,l-Ft),e.globalAlpha=1;const M=Math.floor(e.measureText(N).width);G>M+20&&(e.fillStyle="#000",e.font="600 14px IBM Plex Sans",e.textAlign="center",e.fillText(`${N}`,_+G/2,l/2)),e.fillStyle="rgb(49, 46, 43)",e.font="400 14px IBM Plex Sans",e.textAlign="right",e.fillText(`${(y||0).toFixed(1)}`,_-a1,l/2),e.textAlign="left",e.fillText(`${D.toFixed(1)}`,_+G+a1,l/2)}}}});const S=n.findIndex(({position:g})=>r.x-a<=W(g.end,c,t,i,R)-d);if(r.y&&r.y<=l-u+T&&r.y>=l-u+T-f&&S!==-1){const{start:g,end:_}=n[S].position,{electricalProfile:P,heightLevel:A}=n[S].value;if(P&&P!=="incompatible"){const G=r1(A),y=l-u+m+G*4,D=W(g,c,t,i,R)||d+E/2,B=(W(_,c,t,i,R)||t-I-E/2)-D,O=i1-G*4;e.shadowColor="rgba(0, 0, 0, 0.19)",e.shadowBlur=5,e.strokeStyle="#FFF",e.lineWidth=2,e.strokeRect(D-1,y-1,B+2,O+2),e.stroke()}}_e(e,"rgba(0,0,0,0.1)",R,t,l+1-u),e.restore(),e.clearRect(0,0,d,s),e.clearRect(t-I,0,I,s)},Vt=({width:e,height:t,store:s})=>{const o=U(kt,{width:e,height:t,store:s});return p.createElement("canvas",{id:"electrical-profile-layer",className:"absolute",ref:o,width:e,height:t})},Xt=({ctx:e,width:t,height:s,store:o,setStore:n})=>{V(e,t,s);const i=ve(Le);n&&i.call(At(n)),i.on("mousemove",a=>{const r=V1(a);n&&n(()=>({...o,cursor:{x:r[0],y:r[1]}}))}),i.on("mouseleave",()=>{n&&n(()=>({...o,cursor:{x:null,y:null}}))})},Wt=({width:e,height:t,store:s,setStore:o})=>{const n=U(Xt,{width:e,height:t,store:s,setStore:o});return p.createElement("canvas",{id:"front-interactivity-layer",className:"absolute",ref:n,width:e,height:t})},{MARGIN_LEFT:Yt,MARGIN_RIGHT:l1}=R,Ut=24,$t=8,wt=12,Kt=14,c1=2,qt=11,te=2,zt=4,jt=({ctx:e,width:t,height:s,store:o})=>{const{powerRestrictions:n,ratioX:i,leftOffset:a,layersDisplay:{electricalProfiles:r}}=o;if(!n)return;V(e,t,v.POWER_RESTRICTIONS_HEIGHT),e.save(),e.translate(a,0);const f=k(o.speeds);e.font="normal 12px IBM Plex Sans",e.fillStyle="rgb(121, 118, 113)",e.strokeStyle="rgb(121, 118, 113)",e.lineWidth=1,e.textAlign="center";let l=Q.FIRST;r&&(l=Q.SECOND),_e(e,"rgba(0,0,0,0.1)",R,t,s-v.POWER_RESTRICTIONS_HEIGHT+ae),Oe(e,l,R,t,s,v.POWER_RESTRICTIONS_HEIGHT-ae),n.forEach(({position:c,value:T},u)=>{T.handled?(e.strokeStyle="rgb(121, 118, 113)",e.fillStyle="rgb(121, 118, 113)"):(e.strokeStyle="rgb(217, 28, 28)",e.fillStyle="rgb(217, 28, 28)");const d=W(c.start,f,t,i,R),I=$t;e.beginPath(),e.moveTo(d,I),e.lineTo(d,I+Ut);const E=Math.floor(e.measureText(T.powerRestriction).width);let m=W(c.end,f,t,i,R);u===n.length-1&&(m-=R.CURVE_MARGIN_SIDES/2);const S=I+qt;if(m-d<E+te*2+zt)e.moveTo(d,S),e.lineTo(m-2,S);else{const _=(d+m)/2-E/2-te,P=(d+m)/2+E/2+te;e.moveTo(d,S),e.lineTo(_-te,S),e.moveTo(P+te,S),e.lineTo(m-2,S);const A=(d+m)/2;e.textBaseline="middle",e.fillText(T.powerRestriction,A,S+e.lineWidth/2)}const g=Kt;e.moveTo(m-c1,g),e.lineTo(m-c1,g+wt),e.stroke()}),e.restore(),e.clearRect(0,0,Yt,v.POWER_RESTRICTIONS_HEIGHT),e.clearRect(t-l1,0,l1,v.POWER_RESTRICTIONS_HEIGHT)},Zt=({width:e,marginTop:t,store:s})=>{const o=U(jt,{width:e,height:v.POWER_RESTRICTIONS_HEIGHT,store:s});return p.createElement("canvas",{id:"power-restrictions-layer",className:"absolute",ref:o,width:e,height:v.POWER_RESTRICTIONS_HEIGHT,style:{marginTop:t}})},p1=6,f1=12,d1=10,Jt=({width:e,height:t,store:s,curveX:o,curveY:n,speedText:i,ecoSpeedText:a,effortText:r,electricalModeText:f,electricalProfileText:l,powerRestrictionText:c,previousGradientText:T,modeText:u})=>{var H,C;const{MARGIN_BOTTOM:d,MARGIN_RIGHT:I}=R,{energySource:E,tractionStatus:m,declivities:S,electricalProfiles:g,powerRestrictions:_}=s.detailsBoxDisplay;let P=0,A=0;const G=((H=document.getElementById("details-box"))==null?void 0:H.offsetWidth)||0,y=((C=document.getElementById("details-box"))==null?void 0:C.offsetHeight)||0;o+G>e-I-d1&&(P=G+f1),n+y>t-d-d1&&(A=y+f1);const D=o+p1-P,N=n+p1-A,B=Number(i)-Number(a),O=B!==0?`-${B.toFixed(1)}`:null;return p.createElement("div",{id:"details-box",className:Ie("absolute flex flex-col",{block:n,hidden:!n}),style:{marginTop:N,marginLeft:D}},p.createElement("span",{id:"base-speed-text"},i||"--"),p.createElement("div",null,p.createElement("span",{id:"mareco-speed-text"},a||"--"),O&&p.createElement("span",{id:"speed-difference-text"},O)),(E||m||u||r)&&p.createElement("hr",null),E&&p.createElement("span",{id:"mode-text"},u||"--"),m&&p.createElement("span",{id:"effort-text"},r||"--"),f&&p.createElement("div",{id:"electrical-mode-text"},p.createElement("span",null,f||"--"),g&&p.createElement("span",{className:"ml-2"},l||"--")),_&&p.createElement("span",{id:"power-restriction-text"},c||"--"),S&&p.createElement(p.Fragment,null,p.createElement("hr",null),p.createElement("span",{id:"previous-gradient-text"},`${T} ‰`||"--")))},{MARGIN_LEFT:K,MARGIN_RIGHT:Qt,MARGIN_TOP:ue,MARGIN_BOTTOM:q,CURVE_MARGIN_TOP:T1,CURVE_MARGIN_SIDES:me}=R,z=12.75,xt=36,e3=6,u1=24,t3=({ctx:e,width:t,height:s,store:o})=>{var ke;V(e,t,s);const{cursor:n,layersDisplay:i,ratioX:a,leftOffset:r,speeds:f,ecoSpeeds:l,electrifications:c,slopes:T,electricalProfiles:u,powerRestrictions:d}=o;let I="",E="",m="",S="coasting",g="",_="",P="",A=0,G="",y=0;const D=Re(o.speeds),N=k(o.speeds),O=re(s,i,!1)-q-ue,H=t-K-Qt,C=h=>h*((H-me)/N)*a+r+me/2;if(n.x===null||n.y===null)return;let M=n.x+K,F=h1(n.x,t,o);if(F<0||F>N)return;let Ce=!1;if(i.steps){const h=v1(n.x,t,o);h!==null&&(Ce=!0,F=h.position.start,M=w(F,N,t,a,r),m=h.value)}if(u){const h=(ke=u.find(({position:x})=>C(x.start)<=n.x&&C(x.end)>=n.x))==null?void 0:ke.value.electricalProfile;h&&(_=h)}if(d){const h=d.find(({position:x})=>n.x>=C(x.start)&&n.x<=C(x.end));P=(h==null?void 0:h.value.powerRestriction)||""}const Se=c.findLast(({position:h})=>h.start<=F),ge=Se==null?void 0:Se.value;ge&&(G=ge.type==="electrification"?"electric":"--",g=ge.voltage);let le=Me(f,F,h=>h.position.start);le===f.length-1&&le--;let ce=Me(l,F,h=>h.position.start);ce===l.length-1&&ce--;const be=f[le],He=f[le+1],De=$e(be.position.start,be.value,He.position.start,He.value,F);I=De.toFixed(1);const pe=O-De/D*(O-T1)+ue,fe=l[ce],de=l[ce+1],Be=$e(fe.position.start,fe.value,de.position.start,de.value,F);E=Be.toFixed(1),fe.value<de.value?S="accelerating":fe.value>de.value&&(S="decelerating"),y=O-Be/D*(O-T1)+ue,A=T.findLast(({position:h})=>h.start<=F).value,e.font="normal 12px IBM Plex Sans",e.fillStyle=Te.hex(),e.beginPath(),e.strokeStyle=Te.alpha(.4).hex(),e.lineWidth=.5,e.moveTo(M,pe),e.lineTo(M,s-q),e.moveTo(M,y),e.lineTo(K,y),Math.abs(pe-y)>2&&(e.moveTo(M,pe),e.lineTo(K,pe)),e.stroke(),e.beginPath(),e.lineWidth=3,e.strokeStyle=G1.hex(),e.lineCap="round",e.moveTo(M-z,y),e.lineTo(M+z,y),e.moveTo(M,y-z),e.lineTo(M,y+z),e.stroke(),e.beginPath(),e.lineWidth=1,e.strokeStyle=Te.hex(),e.moveTo(M-z,y),e.lineTo(M+z,y),e.moveTo(M,y-z),e.lineTo(M,y+z),e.stroke(),e.beginPath(),e.strokeStyle=Te.hex(),e.lineCap="butt",e.lineWidth=1,e.moveTo(K,y),e.lineTo(K,y),e.stroke();const Fe=(Math.round(F*10)/10).toFixed(1).toString();return e.textAlign="center",Ce?(e.beginPath(),e.lineWidth=2,e.roundRect(M-.5,s-q-u1*.6,1,u1,[1,1,1,1]),e.fill(),e.stroke(),e.fillText(Fe,M,s-q+me*1.33)):(e.beginPath(),e.lineWidth=1,e.moveTo(M,s-q),e.lineTo(M,s-q+e3),e.stroke(),e.fillText(Fe,M,s-q+me*1.33)),M-K<e.measureText(m).width/2?e.textAlign="start":M-K>H-e.measureText(m).width/2&&(e.textAlign="end"),e.fillText(m,M,s-q+xt),e.clearRect(0,0,t,ue),{curveX:M,curveY:y,speedText:I,ecoSpeedText:E,effortText:S,electricalModeText:g,electricalProfileText:_,powerRestrictionText:P,previousGradientText:A,modeText:G}},s3=({width:e,height:t,heightOffset:s,store:o})=>{const n=L.useRef(null),i=L.useRef(),[a,r]=L.useState(null),f=re(s,o.layersDisplay,!1);return L.useEffect(()=>{const c=n.current.getContext("2d");o.cursor.y&&o.cursor.y<f&&(i.current=t3({ctx:c,width:e,height:t,store:o}))},[e,t,o,f]),L.useEffect(()=>{r(i.current)},[i.current]),p.createElement(p.Fragment,null,p.createElement("canvas",{id:"cursor-layer",className:"absolute",ref:n,width:e,height:t}),a&&p.createElement(Jt,{width:e,height:t,store:o,...a}))},o3=246,n3=({cursorX:e,cursorY:t,height:s,text:o})=>p.createElement("div",{id:"tooltip",className:"absolute",style:{marginTop:t,marginLeft:e-o3/2,maxHeight:s}},p.createElement("span",null,o)),i3='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.92 6.085h.001a.75.75 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.76 2.76 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6 6 0 0 0-.26.16 1 1 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1 1 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.61.61 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187-.146.1-.263.238-.34.398M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>',a3='<svg xmlns="http://www.w3.org/2000/svg" width = "16" height = "16" viewBox = "0 0 16 16" > <path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575zM8 5a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8 5m1 6a1 1 0 1 0-2 0 1 1 0 0 0 2 0" /> </svg>',r3=M1(i3),l3=M1(a3),Z=17,X=12,ie=1,c3=4,p3=8,f3=8,d3=16,T3=16,Ge=4,u3=1,m1=24,m3=24,E3=async({ctx:e,width:t,height:s,store:o})=>{const{speedLimitTags:n,ratioX:i,leftOffset:a,layersDisplay:{electricalProfiles:r,powerRestrictions:f}}=o,{MARGIN_BOTTOM:l,MARGIN_LEFT:c,MARGIN_RIGHT:T}=R;V(e,t,v.SPEED_LIMIT_TAGS_HEIGHT),e.save(),e.translate(a,0);const u=k(o.speeds),d=await Ue(r3),I=await Ue(l3);let E=Q.FIRST;r&&f?E=Q.THIRD:(r||f)&&(E=Q.SECOND),_e(e,"rgba(0,0,0,0.1)",R,t,ae),Oe(e,E,R,t,l,v.SPEED_LIMIT_TAGS_HEIGHT-ae),n&&(n.forEach(({position:m,value:S},g)=>{const{tag:_,color:P}=S,A=W(m.start,u,t,i,R),G=W(m.end,u,t,i,R);if(G!==void 0){const y=G-A-ie,D=ut[P]||P;e.fillStyle=P,e.strokeStyle=_==="UU"?"#494641":P,e.lineWidth=1,e.beginPath(),e.fillRect(A,X,y-ie,Z),e.fillStyle=D;const N=e.measureText(_).width+p3+(g===0?f3:0);if(e.fillRect(A+1+N,X,y-N-2,Z),e.rect(A+N,X,y-ie-N,Z),e.strokeRect(A+1,X,y-ie,Z),e.closePath(),_==="UU"&&(e.lineWidth=.5,e.beginPath(),e.moveTo(A+N+2,X),e.lineTo(A+N+2,X+Z),e.closePath(),e.stroke()),_==="incompatible"||_==="missing_from_train"){const B=_==="incompatible"?I:d;e.fillStyle=P;const O=A+(y-m1)/2,H=X-Ge;It(e,O,H,m1,m3,4),_t(e,B,O+Ge,H+Ge,d3,T3,G1.hex())}else{e.fillStyle="white",e.font='600 12px "IBM Plex Sans"',e.textAlign="left",e.textBaseline="middle";const B=A+c3;e.fillText(_,B,X+u3+Z/2)}}}),_e(e,"rgba(0,0,0,0.1)",R,t,s),e.restore(),e.clearRect(0,0,c,v.SPEED_LIMIT_TAGS_HEIGHT),e.clearRect(t-T,0,t,v.SPEED_LIMIT_TAGS_HEIGHT))},_3=async({width:e,height:t,store:s})=>{const{speedLimitTags:o,ratioX:n,leftOffset:i,cursor:a}=s,{MARGIN_TOP:r,MARGIN_LEFT:f}=R,l=k(s.speeds);if(!o)return null;for(const{position:c,value:T}of o){const u={incompatible:"Incompatible with the infrastructure"},{tag:d}=T;if(!(d in u))continue;const I=u[d];if(c.end===void 0||a.x===null||a.y===null)continue;const E=W(c.start,l,e,n,R),S=W(c.end,l,e,n,R)-E-ie;if(a.x>=E-f+i&&a.x<=E-f+i+S&&a.y>=t-r+X-2&&a.y<=t-r+X-1+Z)return{cursorX:a.x+f,cursorY:X,text:I}}return null},E1=40,I3=2,R3=({width:e,marginTop:t,store:s})=>{const o=L.useRef(null),n=L.useRef();return L.useEffect(()=>{(async()=>{const r=o.current.getContext("2d"),f={speedLimitTags:s.speedLimitTags,ratioX:s.ratioX,leftOffset:s.leftOffset,layersDisplay:{electricalProfiles:s.layersDisplay.electricalProfiles,powerRestrictions:s.layersDisplay.powerRestrictions},speeds:s.speeds};await E3({ctx:r,width:e,height:t,store:f})})()},[e,t,s.speedLimitTags,s.ratioX,s.leftOffset,s.layersDisplay.electricalProfiles,s.layersDisplay.powerRestrictions,s.speeds]),L.useEffect(()=>{(async()=>{const r=o.current.getContext("2d");n.current=await _3({ctx:r,width:e,height:t,store:s})})()},[e,t,s]),p.createElement(p.Fragment,null,p.createElement("canvas",{id:"speed-limit-tags-layer",className:"absolute",ref:o,width:e,height:v.SPEED_LIMIT_TAGS_HEIGHT,style:{marginTop:t}}),n.current&&p.createElement(n3,{cursorX:n.current.cursorX,cursorY:t-E1-I3,height:E1,text:n.current.text}))},{MARGIN_LEFT:se,MARGIN_RIGHT:Ee,MARGIN_BOTTOM:_1,CURVE_MARGIN_SIDES:$}=R,S3=({ctx:e,width:t,height:s,store:o})=>{const{ratioX:n,leftOffset:i,cursor:a}=o;V(e,t,s),e.save(),e.translate(i,0),e.strokeStyle="rgb(121, 118, 113)",e.lineWidth=.5,e.font="normal 12px IBM Plex Sans",e.fillStyle="rgb(182, 179, 175)";const r=k(o.speeds),f=r/o.ratioX;let l,c;f>=200?(l=Math.floor(f/200)*5,c=2):f>=50?(l=2,c=5):f>=20?(l=1,c=5):(l=.1,c=5);const T=Math.floor(r/l),d=T*l/r,I=(t-$-se-Ee)*d*n/T;e.beginPath();const E=s-_1;for(let m=0;m<=T;m++){const S=se+$/2+I*m,g=m%c===0?$*.66:$*.33;if(e.moveTo(S,E),e.lineTo(S,s-_1+g),m%(c*2)===0){e.textAlign="center";const _=(l*m).toFixed(0),A=e.measureText(_).width*2,G=a.x?a.x+se-i:1/0,y=Math.abs(G-S),D=Math.max(Math.min(y/A-.1,1),0),N=Math.abs(t-Ee-$/2-i-S),B=Math.max(Math.min(N/A-.1,1),0),O=Math.abs(se+$/2-i-S);let H=Math.max(Math.min(O/A-.1,1),0);m===0&&(H=1);const C=Math.min(D,B,H);e.fillStyle=`rgb(182, 179, 175, ${C})`,e.fillText(_,S,E+$*1.33)}}e.closePath(),e.stroke(),e.restore(),e.clearRect(0,0,se,s),e.clearRect(t-Ee,0,t,s),e.fillStyle="rgb(182, 179, 175)",e.textAlign="center",e.shadowOffsetY=0,e.shadowBlur=0,e.beginPath(),e.fillText("km",t-Ee-$/2,E+$*1.33),e.closePath(),e.stroke()},g3=({width:e,height:t,store:s})=>{const o=U(S3,{width:e,height:t,store:s});return p.createElement("canvas",{id:"tick-layer-x",className:"absolute rounded-t-xl",ref:o,width:e,height:t})},{MARGIN_LEFT:J,MARGIN_TOP:I1,MARGIN_BOTTOM:j,CURVE_MARGIN_TOP:A3,MARGIN_RIGHT:R1}=R,{Y_LEFT_VERTICAL:y3,Y_LEFT_HORIZONTAL:G3}=y1,P3=6,M3=36,h3=({ctx:e,width:t,height:s,store:o})=>{const n=Re(o.speeds);V(e,t,s),e.strokeStyle="rgb(121, 118, 113)",e.lineWidth=.5,e.font="normal 12px IBM Plex Sans",e.fillStyle="rgb(182, 178, 175)";let i=5;n>250?i=30:n>130?i=20:n>60&&(i=10);const a=Math.ceil(n/i),f=a*i/n,l=(s-j-I1-A3)*f/a;e.beginPath();for(let c=0;c<=a;c++){const T=s-j-l*c;e.moveTo(J-P3,T),e.lineTo(J,T),e.textAlign="right";const u=(c*i).toString(),d=T+4;e.fillStyle="rgb(182, 178, 175 )",e.fillText(u,M3,d)}e.stroke(),e.strokeStyle="rgba(33, 112, 185, 0.6)",e.beginPath(),e.lineWidth=.5;for(let c=3;c<=a;c+=3){const T=s-j-l*c;e.moveTo(J,T),e.lineTo(t-R1,T)}e.stroke(),e.strokeStyle="rgba(33, 112, 185, 0.25)",e.beginPath();for(let c=1;c<=a;c++){if(c%3===0)continue;const T=s-j-l*c;e.moveTo(J,T),e.lineTo(t-R1,T)}e.stroke(),e.clearRect(0,0,t,I1),e.clearRect(J-6,s-j,t,j),e.clearRect(0,s-j+6,J,j),e.fillStyle="rgb(182, 179, 175)",e.textAlign="center",e.shadowOffsetY=0,e.shadowBlur=0,e.beginPath(),e.fillText("km/h",y3,G3),e.closePath(),e.stroke()},v3=({width:e,height:t,store:s})=>{const o=U(h3,{width:e,height:t,store:s});return p.createElement("canvas",{id:"tick-layer-y",className:"absolute rounded-t-xl",ref:o,width:e,height:t})},{MARGIN_LEFT:oe,MARGIN_TOP:Pe,MARGIN_BOTTOM:ne,RIGHT_TICK_MARGINS:S1}=R,{Y_RIGHT_VERTICAL:N3,Y_RIGHT_HORIZONTAL:L3}=y1,O3=({ctx:e,width:t,height:s,store:o})=>{V(e,t,s);const{minGradient:n,maxGradient:i}=P1(o),a=s-Pe-ne-S1,r=a/12,f=Pe+S1/2+a/2+it,l=t-oe+10,c=6;e.font="normal 12px IBM Plex Sans",e.lineWidth=.5;const T=Math.max(i,n),d=Math.ceil(T/6)*6/6;e.beginPath();for(let I=-6;I<=6;I++){const E=I*d,m=f-I*r;e.moveTo(t-oe-c,m),e.lineTo(t-oe,m),e.strokeStyle="rgb(121, 118, 113)",e.textAlign="left";const S=E.toString(),g=m+4,_=1;e.fillStyle=`rgba(182, 179, 175, ${_})`,e.fillText(S,l,g),e.fillText("‰",t-L3,N3)}e.stroke(),e.clearRect(0,0,t,Pe),e.clearRect(t-oe,s-ne,t,ne),e.clearRect(0,s-ne+6,t-oe,ne)},C3=({width:e,height:t,store:s})=>{const o=U(O3,{width:e,height:t,store:s});return p.createElement("canvas",{id:"tick-layer-y-right",className:"absolute rounded-t-xl",ref:o,width:e,height:t})},L1=({width:e,height:t,backgroundColor:s,data:o,setHeight:n,translations:i})=>{const[a,r]=L.useState({speeds:[],ecoSpeeds:[],stops:[],electrifications:[],slopes:[],mrsp:void 0,powerRestrictions:void 0,electricalProfiles:void 0,speedLimitTags:void 0,trainLength:0,ratioX:1,leftOffset:0,cursor:{x:null,y:null},detailsBoxDisplay:{energySource:!0,tractionStatus:!0,declivities:!0,electricalProfiles:!0,powerRestrictions:!0},layersDisplay:{steps:!0,declivities:!1,speedLimits:!1,electricalProfiles:!1,powerRestrictions:!1,speedLimitTags:!1},isSettingsPanelOpened:!1}),{WIDTH_OFFSET:f,HEIGHT_OFFSET:l}=mt(e,t,a.layersDisplay.declivities),c=re(t,a.layersDisplay),T=re(l,a.layersDisplay),{OFFSET_RIGHT_AXIS:u}=R,d=a.layersDisplay.declivities?e-u:e,[I,E]=L.useState(!1),m=()=>{r(g=>({...g,ratioX:1,leftOffset:0})),N1()},S=()=>{r(g=>({...g,isSettingsPanelOpened:!0}))};return L.useEffect(()=>{r(g=>({...g,...o}))},[o]),L.useEffect(()=>{n(c)},[n,c]),p.createElement("div",{style:{width:`${e}px`,height:`${c}px`,backgroundColor:`${s}`},tabIndex:0},p.createElement("div",{className:"flex justify-end absolute base-margin-top",style:{width:d}},p.createElement(ot,{reset:m,openSettingsPanel:S,store:a})),a.isSettingsPanelOpened&&p.createElement("div",{className:"flex justify-end absolute ml-2 base-margin-top",style:{width:d}},p.createElement(gt,{globalHeight:c,color:s,store:a,setStore:r,setIsMouseHoveringSettingsPanel:E,translations:i})),a.layersDisplay.declivities&&p.createElement(Bt,{width:f,height:l,store:a}),p.createElement(bt,{width:f,height:l,store:a}),a.layersDisplay.speedLimits&&p.createElement(Lt,{width:d,height:t,store:a}),a.layersDisplay.steps&&p.createElement(Pt,{width:d,height:t,store:a}),p.createElement(v3,{width:e,height:t,store:a}),a.layersDisplay.electricalProfiles&&p.createElement(Vt,{width:d,height:t+v.ELECTRICAL_PROFILES_HEIGHT,store:a}),a.layersDisplay.powerRestrictions&&p.createElement(Zt,{width:d,marginTop:Ye(t,a.layersDisplay),store:a}),a.layersDisplay.speedLimitTags&&p.createElement(R3,{width:d,marginTop:Ye(t,a.layersDisplay,a.layersDisplay.speedLimitTags),store:a}),p.createElement(g3,{width:d,height:c,store:a}),a.layersDisplay.declivities&&p.createElement(C3,{width:e,height:t,store:a}),!I&&p.createElement(s3,{width:d,height:c,heightOffset:T,store:a}),p.createElement(Wt,{width:f,height:T,store:a,setStore:r}))},O1=st(U1,W1,Y1,$1),b3=({height:e,width:t,backgroundColor:s,data:o,translations:n})=>{const[i,a]=L.useState(521.5);return L.useEffect(()=>{a(e)},[e]),p.createElement("div",{style:{height:i}},p.createElement(L1,{width:t,height:e,backgroundColor:s,data:o,setHeight:a,translations:n}))},Y3={title:"SpeedSpaceChart/Rendering",component:L1,decorators:[e=>p.createElement(e,null)],parameters:{layout:"centered",backgrounds:{default:"dark"}},args:{width:1440,height:521.5,backgroundColor:"rgb(247, 246, 238)",data:O1,setHeight:()=>{},translations:A1},render:e=>p.createElement(b3,{...e}),tags:["autodocs"]},U3={args:{width:1440,height:521.5,backgroundColor:"rgb(247, 246, 238)",data:O1,setHeight:()=>{},translations:A1}},$3=["SpeedSpaceChartDefault"];export{U3 as SpeedSpaceChartDefault,$3 as __namedExportsOrder,Y3 as default};
